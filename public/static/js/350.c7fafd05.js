"use strict";(self.webpackChunkez_theme=self.webpackChunkez_theme||[]).push([[350],{43258:(e,t,a)=>{a.d(t,{J5:()=>u,Jf:()=>d,KU:()=>s,N4:()=>v,Z7:()=>i,hh:()=>p,l8:()=>r,n$:()=>o,oX:()=>l,sm:()=>c});var n=a(19043);function o(){return(0,n.A)({url:"/user/plan/fetch",method:"get"})}function r(){return(0,n.A)({url:"/user/comm/config",method:"get"})}function l(e){return(0,n.A)({url:"/user/plan/fetch?id=".concat(e),method:"get"})}function c(e,t){return(0,n.A)({url:"/user/coupon/check",method:"post",data:{code:e,plan_id:t}})}function i(e){return(0,n.A)({url:"/user/order/save",method:"post",data:e})}function s(e){return(0,n.A)({url:"/user/order/detail?trade_no=".concat(e),method:"get"})}function u(){return(0,n.A)({url:"/user/order/getPaymentMethod",method:"get"})}function d(e){return(0,n.A)({url:"/user/order/check?trade_no=".concat(e),method:"get"})}function v(e){return(0,n.A)({url:"/user/order/cancel",method:"post",data:{trade_no:e}})}function p(e,t){return(0,n.A)({url:"/user/order/checkout",method:"post",data:{trade_no:e,method:t}})}},89350:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ot});var n=a(59258),o=(a(62010),a(20641)),r=a(90033),l=a(53751),c={class:"payment-container"},i={class:"payment-inner"},s={class:"dashboard-card title-card"},u={class:"card-header"},d={class:"card-title"},v={class:"card-body"},p={class:"content-wrapper"},m={class:"left-column"},f={class:"section-wrapper"},k={class:"section-title"},y={key:0,class:"product-info"},_={key:0},h={class:"info-row"},g={class:"info-label"},C={class:"info-value"},L={key:1},b={class:"info-row"},w={class:"info-label"},A={class:"info-value"},E={class:"info-row"},X={class:"info-label"},I={class:"info-value"},D={class:"info-row"},P={class:"info-label"},M={class:"info-value"},$={key:1,class:"skeleton-card"},F={class:"section-wrapper"},T={class:"section-title"},N={key:0,class:"order-info"},Q={class:"info-row"},S={class:"info-label"},z={class:"info-value"},O={class:"info-row"},W={class:"info-label"},x={class:"info-value"},B={key:0,class:"info-row"},R={class:"info-label"},G={class:"info-value amount"},K={key:1,class:"info-row"},Y={class:"info-label"},q={class:"info-value amount"},H={key:2,class:"info-row discount-row"},J={class:"info-label"},V={class:"info-value discount"},U={key:3,class:"info-row"},Z={class:"info-label"},j={class:"info-value discount"},ee={key:4,class:"info-row"},te={class:"info-label"},ae={class:"info-value"},ne={key:5,class:"info-row"},oe={class:"info-label"},re={class:"info-value fee"},le={class:"info-row final-row"},ce={class:"info-label"},ie={class:"info-value final"},se={key:1,class:"skeleton-card"},ue={class:"right-column"},de={class:"section-wrapper order-status"},ve={class:"section-title"},pe={key:0,class:"status-info"},me={class:"status-icon"},fe={class:"status-text"},ke={key:0,class:"activate-status"},ye={key:1},_e={key:2},he={key:3},ge={key:4},Ce={key:5},Le={key:6},be={key:7},we={key:1,class:"skeleton-card"},Ae={key:0,class:"section-wrapper free-order"},Ee={class:"section-title"},Xe={class:"free-notice"},Ie={class:"notice-text"},De={key:1,class:"section-wrapper"},Pe={class:"section-title"},Me={key:0,class:"payment-methods"},$e=["onClick"],Fe={class:"method-icon"},Te=["src","alt"],Ne={class:"method-details"},Qe={class:"method-name"},Se={key:0,class:"method-fee"},ze={class:"method-check"},Oe={key:1,class:"skeleton-card"},We={class:"action-buttons"},xe={key:0,class:"btn-group pay-row"},Be={key:1,class:"btn-group pay-row"},Re={key:0},Ge={key:1},Ke={key:0,class:"btn-group pay-row"},Ye=["disabled"],qe={key:1,class:"loader"},He={key:1,class:"btn-group action-row"},Je=["disabled"],Ve={key:1,class:"loader"},Ue=["disabled"],Ze={key:1,class:"loader"},je={key:2,class:"btn-group action-row"},et=["disabled"],tt={key:1,class:"loader"},at=["disabled"],nt={key:1,class:"loader"},ot={key:0,class:"payment-success-overlay"},rt={class:"success-animation"},lt={class:"check-container"},ct={class:"check-background"},it={key:0,class:"confetti-container"},st={key:0,class:"cancel-modal"},ut={class:"cancel-modal-container"},dt={class:"cancel-modal-content"},vt={class:"cancel-modal-icon"},pt={class:"cancel-modal-header"},mt={class:"cancel-modal-actions"},ft={key:0,class:"modal-wrapper"},kt={class:"modal-container"},yt={class:"modal-card"},_t={class:"modal-header"},ht={class:"icon-wrapper payment"},gt={key:0},Ct={key:1},Lt={key:2,class:"qrcode-container"},bt={key:3,class:"payment-link"},wt={key:0},At={key:1},Et={class:"modal-footer"};var Xt=a(20908),It=a(30388),Dt=(a(28706),a(50113),a(74423),a(44114),a(23288),a(18111),a(20116),a(9868),a(26099),a(27495),a(21699),a(47764),a(5746),a(62953),a(76031),a(48408),a(14603),a(47566),a(98721),a(50953)),Pt=a(46992),Mt=a(33366),$t=a(75220),Ft=a(43258),Tt=a(80394),Nt=a(67944),Qt=a(25910),St=a(25226);const zt={name:"PaymentView",components:{IconCheck:St.iWP,IconX:St.MRt,IconCreditCard:St.Bln,IconCircle:St.ABt,IconCircleCheck:St.iQ6,IconAlertCircle:St.GBC,IconArrowRight:St.hIg,IconAlertTriangle:St.QO,IconRefresh:St.H42,IconExternalLink:St.HW5,IconArrowLeft:St.Gk,QrcodeVue:Nt.Ay,ConfettiExplosion:Qt.A,IconClock:St._Ll,IconLoader2:St.fQ5,IconHelp:St.Lwz},setup:function(){var e=(0,Pt.s9)().t,t=(0,Mt.d)().showToast,a=(0,$t.lq)(),n=(0,$t.rd)(),r=(0,Dt.KR)(!1),l=(0,Dt.Kh)({order:!0,methods:!0,checking:!1,cancelling:!1,paying:!1}),c=(0,Dt.KR)({}),i=(0,Dt.KR)([]),s=(0,Dt.KR)(null),u=(0,Dt.KR)(null),d=(0,Dt.KR)(!1),v=(0,Dt.KR)(!1),p=(0,Dt.KR)(!1),m=(0,Dt.KR)(!1),f=(0,Dt.KR)(!1),k=(0,Dt.KR)(null),y=(0,Dt.KR)(null),_=(0,o.EW)(function(){if(!s.value||!c.value.total_amount)return 0;var e=i.value.find(function(e){return e.id===s.value});if(!e)return 0;var t=0;return e.handling_fee_percent&&(t+=c.value.total_amount*e.handling_fee_percent/100),e.handling_fee_fixed&&(t+=e.handling_fee_fixed),Math.round(t)}),h=(0,o.EW)(function(){return c.value.total_amount?c.value.total_amount+_.value:0}),g=function(){var o=(0,It.A)((0,Xt.A)().m(function o(){var r,i,s;return(0,Xt.A)().w(function(o){for(;;)switch(o.p=o.n){case 0:if(l.order=!0,o.p=1,r=null,(i=new URLSearchParams(window.location.search||window.location.hash.split("?")[1]||"")).has("trade_no")&&(r=i.get("trade_no")),!r&&i.has("out_trade_no")&&(r=i.get("out_trade_no")),r||(r=a.query.trade_no||a.query.out_trade_no),r){o.n=2;break}return t(e("payment.no_order_selected"),"error"),n.push("/shop"),o.a(2);case 2:return o.n=3,(0,Ft.KU)(r);case 3:(s=o.v).data?(c.value=s.data,0===c.value.status&&0===c.value.total_amount&&b()):(t(e("payment.order_not_found"),"error"),n.push("/shop")),o.n=5;break;case 4:o.p=4,o.v,t(e("payment.failed_to_fetch_order"),"error"),n.push("/shop");case 5:return o.p=5,l.order=!1,o.f(5);case 6:return o.a(2)}},o,null,[[1,4,5,6]])}));return function(){return o.apply(this,arguments)}}(),C=function(){var a=(0,It.A)((0,Xt.A)().m(function a(){var n;return(0,Xt.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:return l.methods=!0,a.p=1,a.n=2,(0,Ft.J5)();case 2:(n=a.v).data&&(i.value=n.data,(1===i.value.length||Tt.PAYMENT_CONFIG.autoSelectFirstMethod)&&i.value.length>0&&(s.value=i.value[0].id)),a.n=4;break;case 3:a.p=3,a.v,t(e("payment.failed_to_fetch_methods"),"error");case 4:return a.p=4,l.methods=!1,a.f(4);case 5:return a.a(2)}},a,null,[[1,3,4,5]])}));return function(){return a.apply(this,arguments)}}(),L=function(){var a=(0,It.A)((0,Xt.A)().m(function a(){return(0,Xt.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:if(!(c.value.total_amount>0)||s.value){a.n=1;break}return t(e("payment.select_method_first"),"warning"),a.a(2);case 1:return l.checking=!0,a.p=2,0===c.value.total_amount&&i.value&&i.value.length>0&&(s.value=i.value[0].id),a.n=3,(0,Ft.hh)(c.value.trade_no,s.value);case 3:t(e("payment.payment_processing"),"info"),b(),a.n=5;break;case 4:a.p=4,a.v,t(e("payment.check_failed"),"error"),l.checking=!1;case 5:return a.a(2)}},a,null,[[2,4]])}));return function(){return a.apply(this,arguments)}}(),b=function(){var a=(0,It.A)((0,Xt.A)().m(function a(){var n,o;return(0,Xt.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:if(a.p=0,!d.value){a.n=1;break}return a.a(2);case 1:return a.n=2,w();case 2:0!==c.value.total_amount||d.value?c.value.total_amount>0&&!d.value&&(u.value&&clearInterval(u.value),Tt.PAYMENT_CONFIG.autoCheckPayment?(n=0,u.value=setInterval(function(){n++,w(),Tt.PAYMENT_CONFIG.autoCheckMaxTimes>0&&n>=Tt.PAYMENT_CONFIG.autoCheckMaxTimes&&(clearInterval(u.value),l.checking=!1,d.value||t(e("payment.check_timeout"),"info"))},Tt.PAYMENT_CONFIG.autoCheckInterval)):(o=0,u.value=setInterval(function(){o++,w(),o>=2&&(clearInterval(u.value),l.checking=!1,d.value||t(e("payment.check_timeout"),"info"))},5e3))):setTimeout((0,It.A)((0,Xt.A)().m(function e(){return(0,Xt.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,w(true);case 1:return e.a(2)}},e)})),1e3),a.n=4;break;case 3:a.p=3,a.v,t(e("payment.check_failed"),"error"),l.checking=!1;case 4:return a.a(2)}},a,null,[[0,3]])}));return function(){return a.apply(this,arguments)}}(),w=function(){var a=(0,It.A)((0,Xt.A)().m(function a(){var n,o,r=arguments;return(0,Xt.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:return n=r.length>0&&void 0!==r[0]&&r[0],a.p=1,a.n=2,(0,Ft.Jf)(c.value.trade_no);case 2:1===(o=a.v).data?(c.value.status=o.data,setTimeout(function(){var e=document.querySelector(".order-status-notice");e&&e.classList.add("status-transition"),c.value.status=3,A(!n)},1e3)):0!==o.data&&2!==o.data?(c.value.status=o.data,A(!n)):2===o.data&&(u.value&&(clearInterval(u.value),u.value=null),n||t(e("payment.order_cancelled"),"warning"),l.checking=!1,l.paying=!1,c.value.status=o.data,E()),0===c.value.total_amount&&(l.checking=!1,l.paying=!1),a.n=4;break;case 3:a.p=3,a.v,0===c.value.total_amount&&(l.checking=!1,l.paying=!1);case 4:return a.a(2)}},a,null,[[1,3]])}));return function(){return a.apply(this,arguments)}}(),A=function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];d.value||(u.value&&(clearInterval(u.value),u.value=null),d.value=!0,l.checking=!1,l.paying=!1,E(),r.value||(v.value=!0,(0,o.dY)(function(){setTimeout(function(){p.value=!0},300),a&&t(e("payment.pay_success"),"success"),setTimeout(function(){p.value=!1,setTimeout(function(){v.value=!1},500)},4500)})))},E=function(){f.value=!1,k.value=null,y.value=null},X=function(){var a=(0,It.A)((0,Xt.A)().m(function a(){var n,o,r;return(0,Xt.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:if(s.value){a.n=1;break}return t(e("payment.select_method_first"),"warning"),a.a(2);case 1:return l.paying=!0,a.p=2,a.n=3,(0,Ft.hh)(c.value.trade_no,s.value);case 3:(n=a.v).data&&(0===n.type?(k.value=n.data,y.value=null,f.value=!0):1===n.type&&(y.value=n.data,k.value=null,o="Safari"===(0,Tt.detectBrowser)(),r=Tt.PAYMENT_CONFIG.useSafariPaymentModal,o&&r?f.value=!0:Tt.PAYMENT_CONFIG.openPaymentInNewTab?setTimeout(function(){var e=document.createElement("a");e.href=n.data,e.target="_blank",e.rel="noopener noreferrer",document.body.appendChild(e),e.click(),document.body.removeChild(e),f.value=!0},100):setTimeout(function(){var e=document.createElement("a");e.href=n.data,e.rel="noopener noreferrer",document.body.appendChild(e),e.click(),document.body.removeChild(e)},100)),b()),a.n=5;break;case 4:a.p=4,a.v,t(e("payment.check_failed"),"error");case 5:return a.p=5,l.paying=!1,a.f(5);case 6:return a.a(2)}},a,null,[[2,4,5,6]])}));return function(){return a.apply(this,arguments)}}(),I=function(){var a=(0,It.A)((0,Xt.A)().m(function a(){return(0,Xt.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:return l.cancelling=!0,m.value=!1,a.p=1,a.n=2,(0,Ft.N4)(c.value.trade_no);case 2:t(e("payment.cancel_success"),"success"),u.value&&clearInterval(u.value),n.push("/shop"),a.n=4;break;case 3:a.p=3,a.v,t(e("payment.cancel_failed"),"error");case 4:return a.p=4,l.cancelling=!1,a.f(4);case 5:return a.a(2)}},a,null,[[1,3,4,5]])}));return function(){return a.apply(this,arguments)}}(),D=function(){var a=(0,It.A)((0,Xt.A)().m(function a(){var n;return(0,Xt.A)().w(function(a){for(;;)switch(a.p=a.n){case 0:return l.checking=!0,a.p=1,a.n=2,(0,Ft.Jf)(c.value.trade_no);case 2:0===(n=a.v).data?t(e("payment.payment_pending"),"info"):2===n.data?(t(e("payment.order_cancelled"),"warning"),u.value&&(clearInterval(u.value),u.value=null),c.value.status=n.data):(t(e("payment.payment_successful"),"success"),c.value.status=n.data,d.value=!0,u.value&&(clearInterval(u.value),u.value=null),E(),v.value=!0,setTimeout(function(){p.value=!0},300),setTimeout(function(){p.value=!1,setTimeout(function(){v.value=!1},500)},4500)),a.n=4;break;case 3:a.p=3,a.v,t(e("payment.check_failed"),"error");case 4:return a.p=4,l.checking=!1,l.paying=!1,a.f(4);case 5:return a.a(2)}},a,null,[[1,3,4,5]])}));return function(){return a.apply(this,arguments)}}();return(0,o.sV)(function(){g(),C(),"orders"===a.query.from||document.referrer&&document.referrer.includes("/orders")?r.value=!0:r.value=!1,(0,o.wB)(function(){return c.value.status},function(e){3!==e&&4!==e||d.value||(d.value=!0,r.value||(v.value=!0,(0,o.dY)(function(){setTimeout(function(){p.value=!0},300),setTimeout(function(){p.value=!1,setTimeout(function(){v.value=!1},500)},4500)})))},{immediate:!1})}),(0,o.xo)(function(){u.value&&clearInterval(u.value)}),{loading:l,orderDetail:c,paymentMethods:i,selectedMethod:s,paymentSuccessful:d,showSuccessAnimation:v,showConfettiAnimation:p,fromOrderList:r,formatDate:function(e){return e?new Date(1e3*e).toLocaleString():"-"},formatAmount:function(e){return null==e?"-":"\xa5".concat((e/100).toFixed(2))},formatPeriod:function(t){return"reset_price"===t||"deposit"===t?e("payment.period_types.".concat(t)):{month_price:e("shop.plan.price_options.month"),quarter_price:e("shop.plan.price_options.quarter"),half_year_price:e("shop.plan.price_options.half_year"),year_price:e("shop.plan.price_options.year"),two_year_price:e("shop.plan.price_options.two_year"),three_year_price:e("shop.plan.price_options.three_year"),onetime_price:e("shop.plan.price_options.onetime")}[t]||t},formatTraffic:function(e){return e?e>=1024?"".concat((e/1024).toFixed(1)," TB"):"".concat(e," GB"):"-"},formatFee:function(t){var a="";if(t.handling_fee_percent&&(a+="".concat(t.handling_fee_percent,"%")),t.handling_fee_fixed){var n=(t.handling_fee_fixed/100).toFixed(2);a+=a?" + \xa5".concat(n):"\xa5".concat(n)}return a?"".concat(e("payment.fee"),": ").concat(a):""},selectMethod:function(e){s.value=e},checkPayment:L,cancelCurrentOrder:function(){l.cancelling||(m.value=!0)},goToDashboard:function(){"deposit"===c.value.period?n.push("/wallet/deposit"):n.push("/dashboard")},getPlanPrice:function(){return c.value&&c.value.plan&&c.value.period&&c.value.plan[c.value.period]||0},showCancelConfirm:m,confirmCancel:I,closeModal:function(){m.value=!1},showPaymentModal:f,paymentQRCode:k,paymentLink:y,PAYMENT_CONFIG:Tt.PAYMENT_CONFIG,getSelectedMethodName:function(){if(!s.value)return"";var e=i.value.find(function(e){return e.id===s.value});return e?e.name:""},processPayment:X,openPaymentLink:function(){if(y.value)try{var e="Safari"===(0,Tt.detectBrowser)();if(Tt.PAYMENT_CONFIG.openPaymentInNewTab||e&&Tt.PAYMENT_CONFIG.useSafariPaymentModal){var t=document.createElement("a");t.href=y.value,t.target="_blank",t.rel="noopener noreferrer",document.body.appendChild(t),t.click(),document.body.removeChild(t)}else{var a=document.createElement("a");a.href=y.value,a.rel="noopener noreferrer",document.body.appendChild(a),a.click(),document.body.removeChild(a)}}catch(e){Tt.PAYMENT_CONFIG.openPaymentInNewTab?window.open(y.value,"_blank"):window.location.href=y.value}},closePaymentModal:E,handleFeeAmount:_,totalWithFee:h,window,checkPaymentStatus:D,detectBrowser:Tt.detectBrowser,getStatusText:function(t){return{0:e("payment.status.pending"),1:e("payment.status.processing"),2:e("payment.status.cancelled"),3:e("payment.status.completed"),4:e("payment.status.discounted")}[t]||e("payment.status.unknown")},getStatusClass:function(e){return{0:"status-pending",1:"status-processing",2:"status-cancelled",3:"status-completed",4:"status-discounted"}[e]||"status-unknown"},goBack:function(){n.go(-1)}}}};const Ot=(0,a(66262).A)(zt,[["render",function(e,t,a,Xt,It,Dt){var Pt,Mt,$t=(0,o.g2)("IconClock"),Ft=(0,o.g2)("IconLoader2"),Tt=(0,o.g2)("IconX"),Nt=(0,o.g2)("IconCheck"),Qt=(0,o.g2)("IconHelp"),St=(0,o.g2)("IconAlertCircle"),zt=(0,o.g2)("IconCreditCard"),Ot=(0,o.g2)("IconCircleCheck"),Wt=(0,o.g2)("IconCircle"),xt=(0,o.g2)("IconArrowLeft"),Bt=(0,o.g2)("IconArrowRight"),Rt=(0,o.g2)("IconRefresh"),Gt=(0,o.g2)("ConfettiExplosion"),Kt=(0,o.g2)("IconAlertTriangle"),Yt=(0,o.g2)("QrcodeVue"),qt=(0,o.g2)("IconExternalLink");return(0,o.uX)(),(0,o.CE)("div",c,[(0,o.Lk)("div",i,[(0,o.Lk)("div",s,[(0,o.Lk)("div",u,[(0,o.Lk)("h2",d,(0,r.v_)(e.$t("payment.title")),1)]),(0,o.Lk)("div",v,[(0,o.Lk)("p",null,(0,r.v_)(e.$t("payment.description")),1)])]),(0,o.Lk)("div",p,[(0,o.Lk)("div",m,[(0,o.Lk)("div",f,[(0,o.Lk)("div",k,[(0,o.Lk)("span",null,(0,r.v_)(e.$t("payment.product_info")),1)]),Xt.loading.order?((0,o.uX)(),(0,o.CE)("div",$,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(3,function(e){return(0,o.Lk)("div",{class:"skeleton-text",key:"product-"+e})}),64))])):((0,o.uX)(),(0,o.CE)("div",y,["deposit"===Xt.orderDetail.period?((0,o.uX)(),(0,o.CE)("div",_,[(0,o.Lk)("div",h,[(0,o.Lk)("div",g,(0,r.v_)(e.$t("wallet.deposit.title")),1),(0,o.Lk)("div",C,(0,r.v_)(Xt.formatAmount(Xt.orderDetail.total_amount)),1)])])):((0,o.uX)(),(0,o.CE)("div",L,[(0,o.Lk)("div",b,[(0,o.Lk)("div",w,(0,r.v_)(e.$t("payment.plan_name")),1),(0,o.Lk)("div",A,(0,r.v_)((null===(Pt=Xt.orderDetail.plan)||void 0===Pt?void 0:Pt.name)||"-"),1)]),(0,o.Lk)("div",E,[(0,o.Lk)("div",X,(0,r.v_)(e.$t("payment.period")),1),(0,o.Lk)("div",I,(0,r.v_)(Xt.formatPeriod(Xt.orderDetail.period)),1)]),(0,o.Lk)("div",D,[(0,o.Lk)("div",P,(0,r.v_)(e.$t("payment.traffic")),1),(0,o.Lk)("div",M,(0,r.v_)(Xt.formatTraffic(null===(Mt=Xt.orderDetail.plan)||void 0===Mt?void 0:Mt.transfer_enable)),1)])]))]))]),(0,o.Lk)("div",F,[(0,o.Lk)("div",T,[(0,o.Lk)("span",null,(0,r.v_)(e.$t("payment.order_info")),1)]),Xt.loading.order?((0,o.uX)(),(0,o.CE)("div",se,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(5,function(e){return(0,o.Lk)("div",{class:"skeleton-text",key:"order-"+e})}),64))])):((0,o.uX)(),(0,o.CE)("div",N,[(0,o.Lk)("div",Q,[(0,o.Lk)("div",S,(0,r.v_)(e.$t("payment.trade_no")),1),(0,o.Lk)("div",z,(0,r.v_)(Xt.orderDetail.trade_no||"-"),1)]),(0,o.Lk)("div",O,[(0,o.Lk)("div",W,(0,r.v_)(e.$t("payment.created_at")),1),(0,o.Lk)("div",x,(0,r.v_)(Xt.formatDate(Xt.orderDetail.created_at)),1)]),"deposit"===Xt.orderDetail.period?((0,o.uX)(),(0,o.CE)("div",B,[(0,o.Lk)("div",R,(0,r.v_)(e.$t("wallet.deposit.title")),1),(0,o.Lk)("div",G,(0,r.v_)(Xt.formatAmount(Xt.orderDetail.total_amount)),1)])):((0,o.uX)(),(0,o.CE)("div",K,[(0,o.Lk)("div",Y,(0,r.v_)(e.$t("payment.total_price")),1),(0,o.Lk)("div",q,(0,r.v_)(Xt.formatAmount(Xt.getPlanPrice())),1)])),Xt.orderDetail.discount_amount>0?((0,o.uX)(),(0,o.CE)("div",H,[(0,o.Lk)("div",J,(0,r.v_)(e.$t("payment.discount_amount")),1),(0,o.Lk)("div",V,"-"+(0,r.v_)(Xt.formatAmount(Xt.orderDetail.discount_amount)),1)])):(0,o.Q3)("",!0),null!==Xt.orderDetail.balance_amount&&void 0!==Xt.orderDetail.balance_amount&&Xt.orderDetail.balance_amount>0?((0,o.uX)(),(0,o.CE)("div",U,[(0,o.Lk)("div",Z,(0,r.v_)(e.$t("payment.use_credit")),1),(0,o.Lk)("div",j,"-"+(0,r.v_)(Xt.formatAmount(Xt.orderDetail.balance_amount)),1)])):(0,o.Q3)("",!0),null!==Xt.orderDetail.refund_amount&&void 0!==Xt.orderDetail.refund_amount&&Xt.orderDetail.refund_amount>0?((0,o.uX)(),(0,o.CE)("div",ee,[(0,o.Lk)("div",te,(0,r.v_)(e.$t("payment.refund_amount")),1),(0,o.Lk)("div",ae,(0,r.v_)(Xt.formatAmount(Xt.orderDetail.refund_amount)),1)])):(0,o.Q3)("",!0),Xt.selectedMethod&&Xt.handleFeeAmount>0?((0,o.uX)(),(0,o.CE)("div",ne,[(0,o.Lk)("div",oe,(0,r.v_)(e.$t("payment.handling_fee")),1),(0,o.Lk)("div",re,(0,r.v_)(Xt.formatAmount(Xt.handleFeeAmount)),1)])):(0,o.Q3)("",!0),(0,o.Lk)("div",le,[(0,o.Lk)("div",ce,(0,r.v_)(e.$t("payment.total_with_fee")),1),(0,o.Lk)("div",ie,(0,r.v_)(Xt.formatAmount(Xt.totalWithFee)),1)])]))])]),(0,o.Lk)("div",ue,[(0,o.Lk)("div",de,[(0,o.Lk)("div",ve,[(0,o.Lk)("span",null,(0,r.v_)(e.$t("payment.order_status")),1)]),Xt.loading.order?((0,o.uX)(),(0,o.CE)("div",we,(0,n.A)(t[15]||(t[15]=[(0,o.Lk)("div",{class:"skeleton-text"},null,-1)])))):((0,o.uX)(),(0,o.CE)("div",pe,[(0,o.Lk)("div",{class:(0,r.C4)(["order-status-notice",Xt.getStatusClass(Xt.orderDetail.status)])},[(0,o.Lk)("div",me,[0===Xt.orderDetail.status&&Xt.orderDetail.total_amount>0?((0,o.uX)(),(0,o.Wv)($t,{key:0,size:48})):0===Xt.orderDetail.status&&0===Xt.orderDetail.total_amount?((0,o.uX)(),(0,o.Wv)($t,{key:1,size:48})):1===Xt.orderDetail.status?((0,o.uX)(),(0,o.Wv)(Ft,{key:2,size:48,class:"rotating-icon"})):2===Xt.orderDetail.status?((0,o.uX)(),(0,o.Wv)(Tt,{key:3,size:48})):3===Xt.orderDetail.status?((0,o.uX)(),(0,o.Wv)(Nt,{key:4,size:48})):4===Xt.orderDetail.status?((0,o.uX)(),(0,o.Wv)(Nt,{key:5,size:48})):((0,o.uX)(),(0,o.Wv)(Qt,{key:6,size:48}))]),(0,o.Lk)("div",fe,[0===Xt.orderDetail.status&&0===Xt.orderDetail.total_amount?((0,o.uX)(),(0,o.CE)("h3",ke,(0,r.v_)(e.$t("payment.status.activate")),1)):((0,o.uX)(),(0,o.CE)("h3",ye,(0,r.v_)(Xt.getStatusText(Xt.orderDetail.status)),1)),0===Xt.orderDetail.status&&Xt.orderDetail.total_amount>0?((0,o.uX)(),(0,o.CE)("p",_e,(0,r.v_)(e.$t("payment.description")),1)):1===Xt.orderDetail.status?((0,o.uX)(),(0,o.CE)("p",he,(0,r.v_)(e.$t("payment.payment_processing")),1)):2===Xt.orderDetail.status?((0,o.uX)(),(0,o.CE)("p",ge,(0,r.v_)(e.$t("payment.order_cancelled")),1)):3===Xt.orderDetail.status?((0,o.uX)(),(0,o.CE)("p",Ce,(0,r.v_)(e.$t("payment.payment_successful_desc")),1)):4===Xt.orderDetail.status?((0,o.uX)(),(0,o.CE)("p",Le,(0,r.v_)(e.$t("payment.payment_successful_desc")),1)):0!==Xt.orderDetail.status?((0,o.uX)(),(0,o.CE)("p",be,(0,r.v_)(e.$t("payment.unknown_status_desc")),1)):(0,o.Q3)("",!0)])],2)]))]),Xt.loading.order||0!==Xt.orderDetail.total_amount||0!==Xt.orderDetail.status?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Ae,[(0,o.Lk)("div",Ee,[(0,o.Lk)("span",null,(0,r.v_)(e.$t("payment.free_order")),1)]),(0,o.Lk)("div",Xe,[(0,o.bF)(St,{size:48,class:"notice-icon success"}),(0,o.Lk)("div",Ie,[(0,o.Lk)("h3",null,(0,r.v_)(e.$t("payment.free_order_title")),1),(0,o.Lk)("p",null,(0,r.v_)(e.$t("payment.free_order_desc")),1)])])])),!Xt.loading.order&&0===Xt.orderDetail.status&&Xt.orderDetail.total_amount>0?((0,o.uX)(),(0,o.CE)("div",De,[(0,o.Lk)("div",Pe,[(0,o.Lk)("span",null,(0,r.v_)(e.$t("payment.payment_method")),1)]),Xt.loading.methods?((0,o.uX)(),(0,o.CE)("div",Oe,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(2,function(e){return(0,o.Lk)("div",{class:"skeleton-payment-method",key:"method-"+e})}),64))])):((0,o.uX)(),(0,o.CE)("div",Me,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Xt.paymentMethods,function(e){return(0,o.uX)(),(0,o.CE)("div",{class:(0,r.C4)(["payment-method-item",{active:Xt.selectedMethod===e.id}]),key:e.id,onClick:function(t){return Xt.selectMethod(e.id)}},[(0,o.Lk)("div",Fe,[e.icon?((0,o.uX)(),(0,o.CE)("img",{key:1,src:e.icon,alt:e.name},null,8,Te)):((0,o.uX)(),(0,o.Wv)(zt,{key:0}))]),(0,o.Lk)("div",Ne,[(0,o.Lk)("div",Qe,(0,r.v_)(e.name),1),e.handling_fee_percent||e.handling_fee_fixed?((0,o.uX)(),(0,o.CE)("div",Se,(0,r.v_)(Xt.formatFee(e)),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ze,[Xt.selectedMethod===e.id?((0,o.uX)(),(0,o.Wv)(Ot,{key:0})):((0,o.uX)(),(0,o.Wv)(Wt,{key:1}))])],10,$e)}),128))]))])):(0,o.Q3)("",!0),(0,o.Lk)("div",We,[Xt.fromOrderList&&(Xt.paymentSuccessful||0!==Xt.orderDetail.status)?((0,o.uX)(),(0,o.CE)("div",xe,[(0,o.Lk)("button",{class:"btn-back main-action full-width",onClick:t[0]||(t[0]=function(){return Xt.goBack&&Xt.goBack.apply(Xt,arguments)})},[(0,o.bF)(xt,{size:18}),(0,o.Lk)("span",null,(0,r.v_)(e.$t("payment.return_to_previous")),1)])])):(0,o.Q3)("",!0),(Xt.paymentSuccessful||Xt.orderDetail.status>0)&&!Xt.fromOrderList?((0,o.uX)(),(0,o.CE)("div",Be,[(0,o.Lk)("button",{class:"btn-pay main-action full-width",onClick:t[1]||(t[1]=function(){return Xt.goToDashboard&&Xt.goToDashboard.apply(Xt,arguments)})},[(0,o.bF)(Bt,{size:18}),"deposit"===Xt.orderDetail.period?((0,o.uX)(),(0,o.CE)("span",Re,(0,r.v_)(e.$t("payment.continue_to_wallet")),1)):((0,o.uX)(),(0,o.CE)("span",Ge,(0,r.v_)(e.$t("payment.continue_to_dashboard")),1))])])):(0,o.Q3)("",!0),Xt.loading.order||0!==Xt.orderDetail.status||Xt.paymentSuccessful?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)(o.FK,{key:2},[Xt.orderDetail.total_amount>0?((0,o.uX)(),(0,o.CE)("div",Ke,[(0,o.Lk)("button",{class:"btn-pay main-action full-width",onClick:t[2]||(t[2]=function(){return Xt.processPayment&&Xt.processPayment.apply(Xt,arguments)}),disabled:Xt.orderDetail.total_amount>0&&!Xt.selectedMethod||Xt.loading.paying||Xt.loading.checking},[Xt.loading.paying?((0,o.uX)(),(0,o.CE)("div",qe)):((0,o.uX)(),(0,o.Wv)(zt,{key:0,size:18})),(0,o.Lk)("span",null,(0,r.v_)(e.$t("payment.pay_now")),1)],8,Ye)])):(0,o.Q3)("",!0),0===Xt.orderDetail.total_amount?((0,o.uX)(),(0,o.CE)("div",He,[(0,o.Lk)("button",{class:"btn-back secondary-action",onClick:t[3]||(t[3]=function(){return Xt.cancelCurrentOrder&&Xt.cancelCurrentOrder.apply(Xt,arguments)}),disabled:Xt.loading.cancelling},[Xt.loading.cancelling?((0,o.uX)(),(0,o.CE)("div",Ve)):((0,o.uX)(),(0,o.Wv)(Tt,{key:0,size:18})),(0,o.Lk)("span",null,(0,r.v_)(e.$t("payment.cancel_order")),1)],8,Je),(0,o.Lk)("button",{class:"btn-pay main-action",onClick:t[4]||(t[4]=function(){return Xt.checkPayment&&Xt.checkPayment.apply(Xt,arguments)}),disabled:Xt.loading.checking},[Xt.loading.checking?((0,o.uX)(),(0,o.CE)("div",Ze)):((0,o.uX)(),(0,o.Wv)(zt,{key:0,size:18})),(0,o.Lk)("span",null,(0,r.v_)(e.$t("payment.activate")),1)],8,Ue)])):(0,o.Q3)("",!0),Xt.orderDetail.total_amount>0?((0,o.uX)(),(0,o.CE)("div",je,[(0,o.Lk)("button",{class:"btn-back secondary-action",onClick:t[5]||(t[5]=function(){return Xt.cancelCurrentOrder&&Xt.cancelCurrentOrder.apply(Xt,arguments)}),disabled:Xt.loading.cancelling},[Xt.loading.cancelling?((0,o.uX)(),(0,o.CE)("div",tt)):((0,o.uX)(),(0,o.Wv)(Tt,{key:0,size:18})),(0,o.Lk)("span",null,(0,r.v_)(e.$t("payment.cancel_order")),1)],8,et),(0,o.Lk)("button",{class:"btn-check secondary-action",onClick:t[6]||(t[6]=function(){return Xt.checkPaymentStatus&&Xt.checkPaymentStatus.apply(Xt,arguments)}),disabled:Xt.orderDetail.total_amount>0&&!Xt.selectedMethod||Xt.loading.checking||Xt.loading.paying},[Xt.loading.checking?((0,o.uX)(),(0,o.CE)("div",nt)):((0,o.uX)(),(0,o.Wv)(Rt,{key:0,size:18})),(0,o.Lk)("span",null,(0,r.v_)(e.$t("payment.check_payment")),1)],8,at)])):(0,o.Q3)("",!0)],64))])])])]),(0,o.bF)(l.eB,{name:"fade"},{default:(0,o.k6)(function(){return[Xt.showSuccessAnimation?((0,o.uX)(),(0,o.CE)("div",ot,[(0,o.Lk)("div",rt,[(0,o.Lk)("div",lt,[(0,o.Lk)("div",ct,[(0,o.bF)(Nt,{size:100,class:"check-icon"})])]),(0,o.Lk)("h2",null,(0,r.v_)(e.$t("payment.payment_successful")),1),(0,o.Lk)("p",null,(0,r.v_)(e.$t("payment.payment_successful_desc")),1)]),Xt.showConfettiAnimation?((0,o.uX)(),(0,o.CE)("div",it,[(0,o.bF)(Gt,{particleCount:150,force:.4,stageWidth:Xt.window.innerWidth,stageHeight:Xt.window.innerHeight,colors:["#ffcc00","#ff8800","#ff3333","#26A65B","#42A5F5","#9C27B0"]},null,8,["stageWidth","stageHeight"])])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)]}),_:1}),(0,o.bF)(l.eB,{name:"modal-fade"},{default:(0,o.k6)(function(){return[Xt.showCancelConfirm?((0,o.uX)(),(0,o.CE)("div",st,[(0,o.Lk)("div",{class:"cancel-modal-overlay",onClick:t[7]||(t[7]=function(){return Xt.closeModal&&Xt.closeModal.apply(Xt,arguments)})}),(0,o.Lk)("div",ut,[(0,o.Lk)("div",dt,[(0,o.Lk)("div",vt,[(0,o.bF)(Kt,{size:28})]),(0,o.Lk)("div",pt,[(0,o.Lk)("h3",null,(0,r.v_)(e.$t("payment.confirm_cancel_title")),1),(0,o.Lk)("p",null,(0,r.v_)(e.$t("payment.confirm_cancel_desc")),1)]),(0,o.Lk)("div",mt,[(0,o.Lk)("button",{class:"cancel-btn",onClick:t[8]||(t[8]=function(){return Xt.closeModal&&Xt.closeModal.apply(Xt,arguments)})},(0,r.v_)(e.$t("common.cancel")),1),(0,o.Lk)("button",{class:"confirm-btn",onClick:t[9]||(t[9]=function(){return Xt.confirmCancel&&Xt.confirmCancel.apply(Xt,arguments)})},(0,r.v_)(e.$t("common.confirm")),1)])])])])):(0,o.Q3)("",!0)]}),_:1}),(0,o.bF)(l.eB,{name:"modal"},{default:(0,o.k6)(function(){return[Xt.showPaymentModal?((0,o.uX)(),(0,o.CE)("div",ft,[(0,o.Lk)("div",{class:"modal-backdrop",onClick:t[10]||(t[10]=function(){return Xt.closePaymentModal&&Xt.closePaymentModal.apply(Xt,arguments)})}),(0,o.Lk)("div",kt,[(0,o.Lk)("div",yt,[(0,o.Lk)("button",{class:"close-button",onClick:t[11]||(t[11]=function(){return Xt.closePaymentModal&&Xt.closePaymentModal.apply(Xt,arguments)})},"\xd7"),(0,o.Lk)("div",_t,[(0,o.Lk)("div",ht,[(0,o.bF)(zt,{size:32})]),(0,o.Lk)("h3",null,(0,r.v_)(Xt.selectedMethod?Xt.getSelectedMethodName():e.$t("payment.payment_method")),1),"Safari"===Xt.detectBrowser()&&Xt.PAYMENT_CONFIG.useSafariPaymentModal&&Xt.paymentLink?((0,o.uX)(),(0,o.CE)("p",gt,(0,r.v_)(e.$t("payment.safari_payment_notice")),1)):((0,o.uX)(),(0,o.CE)("p",Ct,(0,r.v_)(e.$t("payment.scan_qrcode")),1)),Xt.paymentQRCode?((0,o.uX)(),(0,o.CE)("div",Lt,[(0,o.bF)(Yt,{value:Xt.paymentQRCode,size:Xt.PAYMENT_CONFIG.qrcodeSize,background:Xt.PAYMENT_CONFIG.qrcodeBackground,foreground:Xt.PAYMENT_CONFIG.qrcodeColor,level:"H","render-as":"svg"},null,8,["value","size","background","foreground"])])):(0,o.Q3)("",!0),Xt.paymentLink?((0,o.uX)(),(0,o.CE)("div",bt,[(0,o.Lk)("button",{class:"btn-link",onClick:t[12]||(t[12]=function(){return Xt.openPaymentLink&&Xt.openPaymentLink.apply(Xt,arguments)})},[(0,o.bF)(qt,{size:18}),"Safari"===Xt.detectBrowser()&&Xt.PAYMENT_CONFIG.useSafariPaymentModal?((0,o.uX)(),(0,o.CE)("span",wt,(0,r.v_)(e.$t("payment.safari_payment_button")),1)):((0,o.uX)(),(0,o.CE)("span",At,(0,r.v_)(e.$t("payment.open_in_new_tab")),1))])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Et,[(0,o.Lk)("button",{class:"btn-secondary",onClick:t[13]||(t[13]=function(){return Xt.closePaymentModal&&Xt.closePaymentModal.apply(Xt,arguments)})},[(0,o.bF)(Tt,{size:18}),(0,o.Lk)("span",null,(0,r.v_)(e.$t("common.cancel")),1)]),(0,o.Lk)("button",{class:"btn-primary",onClick:t[14]||(t[14]=function(){return Xt.checkPayment&&Xt.checkPayment.apply(Xt,arguments)})},[(0,o.bF)(Rt,{size:18}),(0,o.Lk)("span",null,(0,r.v_)(e.$t("payment.check_payment")),1)])])])])])):(0,o.Q3)("",!0)]}),_:1})])}],["__scopeId","data-v-5bdcc1e9"]])}}]);
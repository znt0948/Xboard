"use strict";(self.webpackChunkez_theme=self.webpackChunkez_theme||[]).push([[35],{12321:(e,n,o)=>{o.d(n,{A:()=>l});var t=o(20641),s=o(90033),a={key:0,class:"spinner-text"};const c={name:"LoadingSpinner",props:{text:{type:String,default:""},overlay:{type:Boolean,default:!1}}};const l=(0,o(66262).A)(c,[["render",function(e,n,o,c,l,i){return(0,t.uX)(),(0,t.CE)("div",{class:(0,s.C4)(["loading-spinner",{"loading-spinner-overlay":o.overlay}])},[n[0]||(n[0]=(0,t.Lk)("div",{class:"spinner"},[(0,t.Lk)("div",{class:"spinner-circle"})],-1)),o.text?((0,t.uX)(),(0,t.CE)("div",a,(0,s.v_)(o.text),1)):(0,t.Q3)("",!0)],2)}],["__scopeId","data-v-4d20d688"]])},50035:(e,n,o)=>{o.r(n),o.d(n,{default:()=>Ie});var t=o(20908),s=o(30388),a=(o(62010),o(76031),o(20641)),c=o(90033),l=o(50953),i=o(46992),r=o(12321),d=o(25226),u=o(54119),v=(o(16280),o(76918),o(19043));function p(){return(0,v.A)({url:"/user/server/fetch",method:"get"}).then(function(e){if("object"===(0,u.A)(e))return e;throw new Error("Invalid response format")}).catch(function(e){throw e})}var f=o(92549),k=o(80394),m=(o(28706),o(48598),o(44114),o(60739),o(23288),o(33110),o(26099),o(78459),o(58940),o(27495),o(38781),o(25440),o(42207),o(55815),o(64979),o(79739),o(53751)),h=o(33366),_=o(87583),b={class:"node-detail-modal-container"},y={class:"node-detail-modal-header"},C={class:"modal-title"},L={key:"info",class:"node-detail-modal-body"},g={class:"node-info-section"},w={class:"info-row"},R={class:"info-label"},I={class:"info-value"},E={class:"info-row"},X={class:"info-label"},$={class:"info-row"},F={class:"info-label"},Q={class:"info-value"},A={class:"info-row"},K={class:"info-label"},z={class:"info-value"},N={key:0,class:"info-row"},q={class:"info-label"},U={class:"info-value"},S={key:1,class:"info-row"},T={class:"info-label"},x={class:"info-value"},O={key:2,class:"info-row"},W={class:"info-label"},D={class:"info-value"},j={class:"page-nav-btn-container"},G={key:"subscribe",class:"node-detail-modal-body"},B={class:"quick-link-section"},V={class:"section-header"},M={class:"view-toggle"},J={key:0,class:"link-card"},Z={class:"link-text"},H={key:1,class:"qrcode-container"},P={key:0,class:"qrcode-loading"},Y={key:1,class:"qrcode-wrapper"},ee=["src"],ne={class:"page-nav-btn-container"};const oe={__name:"NodeDetailModal",props:{show:{type:Boolean,default:!1},node:{type:Object,default:function(){return{}}},userInfo:{type:Object,default:function(){return{}}}},emits:["close"],setup:function(e,n){var o=n.emit,t=(0,i.s9)().t,s=(0,h.d)().showToast,r=e,u=o,v=(0,l.KR)("info"),p=(0,l.KR)("slide-left"),f=function(e){p.value="subscribe"===e?"slide-left":"slide-right",v.value=e},k=(0,l.KR)("link"),oe=(0,l.KR)(""),te=(0,l.KR)(!1),se=function(){u("close"),setTimeout(function(){v.value="info"},300)},ae=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,n){return String.fromCharCode(parseInt(n,16))}))},ce=(0,a.EW)(function(){var e,n,o=null===(e=r.node.type)||void 0===e?void 0:e.toLowerCase();if(!o||!r.node.host||!r.node.port)return t("nodes.invalidNodeData")||"\u8282\u70b9\u6570\u636e\u4e0d\u5b8c\u6574\uff0c\u65e0\u6cd5\u751f\u6210\u94fe\u63a5";"shadowsocks"===o&&(o="ss");var s=(null===(n=r.userInfo)||void 0===n?void 0:n.uuid)||"00000000-0000-0000-0000-000000000000";switch(o){case"ss":var a=r.node.cipher||"chacha20-ietf-poly1305",c="".concat(a,":").concat(s,"@").concat(r.node.host,":").concat(r.node.port),l=ae(c);return"ss://".concat(l);case"vmess":var i={v:"2",ps:r.node.name,add:r.node.host,port:r.node.port,id:s,aid:"0",net:r.node.network||"tcp",type:"none",host:r.node.host,path:r.node.path||"/",tls:1===r.node.tls?"tls":""},d=ae(JSON.stringify(i));return"vmess://".concat(d);case"vless":var u="vless://".concat(s,"@").concat(r.node.host,":").concat(r.node.port);r.node.flow&&(u+="&flow=".concat(encodeURIComponent(r.node.flow)));var v=r.node.network||"tcp";if(u+="&type=".concat(encodeURIComponent(v)),u+="&headerType=none",r.node.tls){var p,f=2===r.node.tls?"reality":"tls";if(u+="&security=".concat(f),2===r.node.tls&&r.node.tls_settings)r.node.tls_settings.server_name&&(u+="&sni=".concat(encodeURIComponent(r.node.tls_settings.server_name))),u+="&fp=".concat(encodeURIComponent((null===(p=r.node.tls_settings)||void 0===p?void 0:p.fingerprint)||"chrome")),r.node.tls_settings.public_key&&(u+="&pbk=".concat(encodeURIComponent(r.node.tls_settings.public_key))),r.node.tls_settings.short_id&&(u+="&sid=".concat(encodeURIComponent(r.node.tls_settings.short_id))),r.node.tls_settings.server_port&&r.node.tls_settings.server_port!==r.node.port.toString()&&(u+="&port=".concat(encodeURIComponent(r.node.tls_settings.server_port))),"1"===r.node.tls_settings.allow_insecure&&(u+="&allowInsecure=1")}return r.node.path&&(u+="&path=".concat(encodeURIComponent(r.node.path))),u+="#".concat(encodeURIComponent(r.node.name));case"trojan":var k="trojan://".concat(s,"@").concat(r.node.host,":").concat(r.node.port);return r.node.allow_insecure&&(k+="?allowInsecure=1"),k+="#".concat(encodeURIComponent(r.node.name));case"hysteria":var m="hysteria2://".concat(s,"@").concat(r.node.host,":").concat(r.node.port),h=[];return r.node.sni&&h.push("sni=".concat(encodeURIComponent(r.node.sni))),h.push("insecure=".concat(r.node.allow_insecure?"1":"0")),h.length>0&&(m+="?".concat(h.join("&"))),m+="#".concat(encodeURIComponent(r.node.name));default:return t("nodes.unsupportedNodeType")||"\u4e0d\u652f\u6301\u7684\u7c7b\u578b"}}),le=function(){if(ce.value){te.value=!0;try{_.toDataURL(ce.value,{width:200,margin:2,color:{dark:"#000000",light:"#ffffff"}}).then(function(e){oe.value=e,te.value=!1}).catch(function(e){te.value=!1,s(t("common.qrCodeGenerationFailed")||"\u4e8c\u7ef4\u7801\u751f\u6210\u5931\u8d25","error")})}catch(e){te.value=!1,s(t("common.qrCodeGenerationFailed")||"\u4e8c\u7ef4\u7801\u751f\u6210\u5931\u8d25","error")}}},ie=function(){te.value=!1},re=function(){navigator.clipboard.writeText(ce.value).then(function(){s(t("common.copied")||"\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f","success")}).catch(function(e){try{var n=document.createElement("textarea");n.value=ce.value,n.style.position="fixed",document.body.appendChild(n),n.focus(),n.select();var o=document.execCommand("copy");document.body.removeChild(n),o?s(t("common.copied")||"\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f","success"):s(t("common.copyFailed")||"\u590d\u5236\u5931\u8d25","error")}catch(e){s(t("common.copyFailed")||"\u590d\u5236\u5931\u8d25","error")}})};return(0,a.nT)(function(){"qrcode"===k.value&&r.show&&"subscribe"===v.value&&le()}),(0,a.nT)(function(){r.show&&"qrcode"===k.value&&"subscribe"===v.value&&le()}),(0,a.nT)(function(){"subscribe"===v.value&&"qrcode"===k.value&&r.show&&le()}),function(n,o){return(0,a.uX)(),(0,a.Wv)(m.eB,{name:"fade"},{default:(0,a.k6)(function(){return[e.show?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"node-detail-modal-overlay",onClick:(0,m.D$)(se,["self"])},[(0,a.Lk)("div",b,[(0,a.Lk)("div",y,[(0,a.Lk)("h3",C,(0,c.v_)(e.node.name),1),(0,a.Lk)("button",{class:"modal-close-btn",onClick:se},[(0,a.bF)((0,l.R1)(d.MRt),{size:20})])]),(0,a.bF)(m.eB,{name:p.value,mode:"out-in"},{default:(0,a.k6)(function(){return["info"===v.value?((0,a.uX)(),(0,a.CE)("div",L,[(0,a.Lk)("div",g,[(0,a.Lk)("div",w,[(0,a.Lk)("span",R,(0,c.v_)(n.$t("nodes.type"))+":",1),(0,a.Lk)("span",I,(0,c.v_)(e.node.type),1)]),(0,a.Lk)("div",E,[(0,a.Lk)("span",X,(0,c.v_)(n.$t("nodes.rate"))+":",1),(0,a.Lk)("span",{class:(0,c.C4)(["info-value",{"high-rate":1!=parseFloat(e.node.rate)}])},"x"+(0,c.v_)(e.node.rate),3)]),(0,a.Lk)("div",$,[(0,a.Lk)("span",F,(0,c.v_)(n.$t("nodes.host"))+":",1),(0,a.Lk)("span",Q,(0,c.v_)(e.node.host),1)]),(0,a.Lk)("div",A,[(0,a.Lk)("span",K,(0,c.v_)(n.$t("nodes.port"))+":",1),(0,a.Lk)("span",z,(0,c.v_)(e.node.port),1)]),"ss"===e.node.type||"shadowsocks"===e.node.type?((0,a.uX)(),(0,a.CE)("div",N,[(0,a.Lk)("span",q,(0,c.v_)(n.$t("nodes.cipher"))+":",1),(0,a.Lk)("span",U,(0,c.v_)(e.node.cipher),1)])):(0,a.Q3)("",!0),"trojan"===e.node.type?((0,a.uX)(),(0,a.CE)("div",S,[(0,a.Lk)("span",T,(0,c.v_)(n.$t("nodes.security"))+":",1),(0,a.Lk)("span",x,(0,c.v_)(e.node.allow_insecure?n.$t("nodes.allowInsecure"):n.$t("nodes.secure")),1)])):(0,a.Q3)("",!0),"vmess"===e.node.type?((0,a.uX)(),(0,a.CE)("div",O,[(0,a.Lk)("span",W,(0,c.v_)(n.$t("nodes.tls")||"TLS")+":",1),(0,a.Lk)("span",D,(0,c.v_)(1===e.node.tls?n.$t("common.on"):n.$t("common.off")),1)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",j,[(0,a.Lk)("button",{class:"page-nav-btn",onClick:o[0]||(o[0]=function(e){return f("subscribe")})},[(0,a.bF)((0,l.R1)(d.AXG),{size:16}),(0,a.eW)(" "+(0,c.v_)(n.$t("nodes.viewSubscribeLink")),1)])])])):"subscribe"===v.value?((0,a.uX)(),(0,a.CE)("div",G,[(0,a.Lk)("div",B,[(0,a.Lk)("div",V,[(0,a.Lk)("h4",null,(0,c.v_)(n.$t("nodes.quickLink")),1),(0,a.Lk)("div",M,[(0,a.Lk)("button",{class:(0,c.C4)(["toggle-btn",{active:"link"===k.value}]),onClick:o[1]||(o[1]=function(e){return k.value="link"})},[(0,a.bF)((0,l.R1)(d.nRQ),{size:16}),(0,a.eW)(" "+(0,c.v_)(n.$t("nodes.linkView")),1)],2),(0,a.Lk)("button",{class:(0,c.C4)(["toggle-btn",{active:"qrcode"===k.value}]),onClick:o[2]||(o[2]=function(e){return k.value="qrcode"})},[(0,a.bF)((0,l.R1)(d.A_l),{size:16}),(0,a.eW)(" "+(0,c.v_)(n.$t("nodes.qrcodeView")),1)],2)])]),"link"===k.value?((0,a.uX)(),(0,a.CE)("div",J,[(0,a.Lk)("pre",Z,(0,c.v_)(ce.value),1),(0,a.Lk)("button",{class:"copy-btn",onClick:re},[(0,a.bF)((0,l.R1)(d.bzS),{size:16}),(0,a.eW)(" "+(0,c.v_)(n.$t("common.copy")),1)])])):"qrcode"===k.value?((0,a.uX)(),(0,a.CE)("div",H,[te.value?((0,a.uX)(),(0,a.CE)("div",P,[o[4]||(o[4]=(0,a.Lk)("div",{class:"loader"},null,-1)),(0,a.Lk)("p",null,(0,c.v_)(n.$t("common.loadingQRCode")),1)])):((0,a.uX)(),(0,a.CE)("div",Y,[(0,a.Lk)("img",{src:oe.value,alt:"QR Code",onLoad:ie},null,40,ee),(0,a.Lk)("button",{class:"copy-btn",onClick:re},[(0,a.bF)((0,l.R1)(d.bzS),{size:16}),(0,a.eW)(" "+(0,c.v_)(n.$t("common.copy")),1)])]))])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",ne,[(0,a.Lk)("button",{class:"page-nav-btn",onClick:o[3]||(o[3]=function(e){return f("info")})},[(0,a.bF)((0,l.R1)(d.Gk),{size:16}),(0,a.eW)(" "+(0,c.v_)(n.$t("common.back")),1)])])])):(0,a.Q3)("",!0)]}),_:1},8,["name"])])])):(0,a.Q3)("",!0)]}),_:1})}}};var te=o(66262);const se=(0,te.A)(oe,[["__scopeId","data-v-3737e657"]]);var ae={class:"nodes-container"},ce={class:"nodes-inner"},le={class:"dashboard-card welcome-card"},ie={class:"card-header"},re={class:"card-title"},de={class:"card-body"},ue={key:0,class:"nodes-loading"},ve={key:1,class:"nodes-error"},pe={key:2,class:"nodes-content"},fe={class:"node-items"},ke={class:"node-status"},me={class:"node-info"},he={class:"node-tags"},_e={key:0,class:"node-tag rate-tag"},be={class:"node-tag type-tag"},ye={class:"node-name"},Ce={key:0,class:"node-host"},Le={key:0,class:"node-actions"},ge=["onClick"],we={key:3,class:"nodes-empty"};const Re={__name:"NodeList",setup:function(e){var n=(0,i.s9)().t,o=(0,a.WQ)("$toast"),u=(0,l.KR)(!0),v=(0,l.KR)(""),m=(0,l.KR)([]),h=(0,l.KR)(k.NODES_CONFIG.showNodeDetails),_=(0,l.KR)(k.NODES_CONFIG.showNodeRate),b=(0,l.KR)(k.NODES_CONFIG.allowViewNodeInfo),y=(0,l.KR)(null),C=(0,l.KR)(!1),L=(0,l.KR)(null),g=function(){C.value=!1,setTimeout(function(){L.value=null},300)},w=function(){var e=(0,s.A)((0,t.A)().m(function e(){var s;return(0,t.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,f.ug)();case 1:(s=e.v)&&s.data&&(y.value=s.data),e.n=3;break;case 2:e.p=2,e.v,o&&o.error(n("common.userInfoError")||"\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25");case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,s.A)((0,t.A)().m(function e(){var s,a,c;return(0,t.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return u.value=!0,v.value="",e.p=1,e.n=2,p();case 2:(s=e.v)&&s.data?m.value=s.data:m.value=[],e.n=4;break;case 3:e.p=3,c=e.v,v.value=(null===(a=c.response)||void 0===a?void 0:a.message)||(c&&c.message?c.message:n("common.networkError")||"\u7f51\u7edc\u9519\u8bef"),o&&o.error(v.value);case 4:return e.p=4,u.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}();return(0,a.sV)(function(){w(),R()}),function(e,n){return(0,a.uX)(),(0,a.CE)("div",ae,[(0,a.Lk)("div",ce,[(0,a.Lk)("div",le,[(0,a.Lk)("div",ie,[(0,a.Lk)("h2",re,(0,c.v_)(e.$t("nodes.welcome.title")||"\u8282\u70b9\u5217\u8868"),1)]),(0,a.Lk)("div",de,[(0,a.Lk)("p",null,(0,c.v_)(e.$t("nodes.welcome.description")||"\u67e5\u770b\u5e76\u4f7f\u7528\u53ef\u7528\u7684\u670d\u52a1\u5668\u8282\u70b9"),1)])]),u.value?((0,a.uX)(),(0,a.CE)("div",ue,[(0,a.bF)(r.A),(0,a.Lk)("p",null,(0,c.v_)(e.$t("nodes.loading")||"\u6b63\u5728\u52a0\u8f7d\u8282\u70b9..."),1)])):v.value?((0,a.uX)(),(0,a.CE)("div",ve,[(0,a.bF)((0,l.R1)(d.QO),{size:48,class:"error-icon"}),(0,a.Lk)("p",null,(0,c.v_)(v.value),1),(0,a.Lk)("button",{class:"retry-button",onClick:R},(0,c.v_)(e.$t("common.retry")||"\u91cd\u8bd5"),1)])):m.value.length>0?((0,a.uX)(),(0,a.CE)("div",pe,[(0,a.Lk)("div",fe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(m.value,function(e){return(0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"node-item"},[(0,a.Lk)("div",ke,[(0,a.Lk)("div",{class:(0,c.C4)(["status-indicator",{online:1===e.is_online}])},null,2)]),(0,a.Lk)("div",me,[(0,a.Lk)("div",he,[_.value?((0,a.uX)(),(0,a.CE)("span",_e,"x"+(0,c.v_)(e.rate),1)):(0,a.Q3)("",!0),(0,a.Lk)("span",be,(0,c.v_)(e.type),1),e.tags&&e.tags.length>0?((0,a.uX)(!0),(0,a.CE)(a.FK,{key:1},(0,a.pI)(e.tags,function(e,n){return(0,a.uX)(),(0,a.CE)("span",{key:n,class:"node-tag"},(0,c.v_)(e),1)}),128)):(0,a.Q3)("",!0)]),(0,a.Lk)("h3",ye,(0,c.v_)(e.name),1),h.value?((0,a.uX)(),(0,a.CE)("p",Ce,(0,c.v_)(e.host)+":"+(0,c.v_)(e.port),1)):(0,a.Q3)("",!0)]),_.value&&b.value?((0,a.uX)(),(0,a.CE)("div",Le,[(0,a.Lk)("button",{class:"more-btn",onClick:function(n){return function(e){L.value=e,C.value=!0}(e)}},[(0,a.bF)((0,l.R1)(d._TI),{size:20})],8,ge)])):(0,a.Q3)("",!0)])}),128))])])):((0,a.uX)(),(0,a.CE)("div",we,[(0,a.bF)((0,l.R1)(d.ZTz),{size:48,class:"empty-icon"}),(0,a.Lk)("p",null,(0,c.v_)(e.$t("nodes.noNodes")||"\u6682\u65e0\u53ef\u7528\u8282\u70b9"),1)]))]),b.value?((0,a.uX)(),(0,a.Wv)(se,{key:0,show:C.value,node:L.value,userInfo:y.value,onClose:g},null,8,["show","node","userInfo"])):(0,a.Q3)("",!0)])}}},Ie=(0,te.A)(Re,[["__scopeId","data-v-10814236"]])}}]);
"use strict";(self.webpackChunkez_theme=self.webpackChunkez_theme||[]).push([[160],{58160:(e,a,t)=>{t.r(a),t.d(a,{default:()=>T});var r=t(20641),n=t(90033),l={class:"service-header"},u={class:"service-title"},i={class:"service-content"},o={key:0,class:"service-crisp-container"},c={key:0,class:"service-loading"},v={key:1,class:"service-other-container"},s={class:"other-service-tips"},d={id:"other-service-wrapper",ref:"otherServiceContainer"},p={key:2,class:"service-loading"};var m=t(20908),f=t(78676),h=t(30388),I=t(54119),_=(t(51629),t(23418),t(62010),t(18111),t(7588),t(9868),t(79432),t(26099),t(27495),t(47764),t(71761),t(42762),t(23500),t(62953),t(50953)),C=t(75220),E=t(66278),g=t(46992),k=t(80394),S=t(92549),w=t(49586),b=t(25226),R=t(84337);"undefined"!=typeof window&&(window.CRISP_INITIALIZED=window.CRISP_INITIALIZED||!1);const y={name:"CustomerService",components:{IconArrowLeft:b.Gk,IconRefresh:b.H42},setup:function(){var e=(0,C.rd)(),a=(0,E.Pj)(),t=(0,g.s9)().t,n=(0,_.KR)(null),l=(0,_.KR)(!0),u=(0,_.KR)(null),i=(0,_.KR)(window.CRISP_INITIALIZED||!1),o=(0,_.KR)("\xa5"),c=(0,_.KR)(null),v=(0,r.EW)(function(){return(null===k.CUSTOMER_SERVICE_CONFIG||void 0===k.CUSTOMER_SERVICE_CONFIG?void 0:k.CUSTOMER_SERVICE_CONFIG.type)||"crisp"}),s=function(){if("crisp"===v.value){if(window.CRISP_INITIALIZED)try{return R.YH.chat.show(),R.YH.chat.open(),l.value=!1,void(i.value=!0)}catch(e){}try{var e,t=null===k.CUSTOMER_SERVICE_CONFIG||void 0===k.CUSTOMER_SERVICE_CONFIG||null===(e=k.CUSTOMER_SERVICE_CONFIG.customHtml)||void 0===e?void 0:e.match(/CRISP_WEBSITE_ID="([^"]*)"/),r=t?t[1]:"";if(!r)return void(l.value=!1);if(R.YH.configure(r),"dark"===(localStorage.getItem("theme")||a.getters.currentTheme||"light")&&R.YH.setColorTheme("dark"),a.getters.isLoggedIn){var u="";if(n.value&&"object"===(0,I.A)(n.value)&&(n.value.email?u=n.value.email:n.value.data&&n.value.data.email&&(u=n.value.data.email)),!u&&c.value&&"object"===(0,I.A)(c.value)&&(c.value.email?u=c.value.email:c.value.data&&c.value.data.email&&(u=c.value.data.email)),!u){var s=localStorage.getItem("user");if(s)try{var d=JSON.parse(s);d&&d.email&&(u=d.email)}catch(e){}}if(u){R.YH.user.setEmail(u);var p=u.split("@")[0];R.YH.user.setNickname(p)}var m="\u672a\u77e5\u5957\u9910";c.value&&c.value.plan&&c.value.plan.name?m=c.value.plan.name:c.value&&c.value.data&&c.value.data.plan&&c.value.data.plan.name?m=c.value.data.plan.name:n.value&&n.value.plan_name&&""!==n.value.plan_name.trim()?m=n.value.plan_name:n.value&&n.value.group&&n.value.group.name&&""!==n.value.group.name.trim()&&(m=n.value.group.name);var f="\u65e0\u9650\u671f";c.value&&c.value.expired_at?f=(0,w.Yq)(c.value.expired_at):c.value&&c.value.data&&c.value.data.expired_at?f=(0,w.Yq)(c.value.data.expired_at):n.value&&n.value.expired_at?f=(0,w.Yq)(n.value.expired_at):n.value&&n.value.data&&n.value.data.expired_at&&(f=(0,w.Yq)(n.value.data.expired_at));var h=0,_=0,C=0;c.value&&"object"===(0,I.A)(c.value)&&(void 0!==c.value.transfer_enable?(h=c.value.transfer_enable||0,_=c.value.u||0,C=c.value.d||0):c.value.data&&void 0!==c.value.data.transfer_enable&&(h=c.value.data.transfer_enable||0,_=c.value.data.u||0,C=c.value.data.d||0)),0===h&&n.value&&"object"===(0,I.A)(n.value)&&(void 0!==n.value.transfer_enable?(h=n.value.transfer_enable||0,_=n.value.u||0,C=n.value.d||0):n.value.data&&void 0!==n.value.data.transfer_enable&&(h=n.value.data.transfer_enable||0,_=n.value.data.u||0,C=n.value.data.d||0));var E=((h-(_+C))/1073741824).toFixed(2),g=0;n.value&&"object"===(0,I.A)(n.value)&&(void 0!==n.value.balance?g=n.value.balance||0:n.value.data&&void 0!==n.value.data.balance&&(g=n.value.data.balance||0));var S={Email:u,Plan:m,Expires:f,Traffic:E+" GB",Balance:g+" "+o.value};R.YH.session.setData(S)}R.YH.session.onLoaded(function(){l.value=!1,window.CRISP_INITIALIZED=!0,i.value=!0})}catch(e){l.value=!1}}},d=function(){document.querySelectorAll('script[id^="zoho"], script[id*="chat"], script[id*="support"], script[id*="customer"]').forEach(function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}),u.value&&(u.value.innerHTML=""),window.ZohoDeskAsap&&(window.ZohoDeskAsap=void 0),document.querySelectorAll('[id*="chat"], [id*="support"], [id*="crisp"], [id*="zoho"], [id*="custom-chat"]').forEach(function(e){e&&"other-service-wrapper"!==e.id&&e.parentNode&&e.parentNode.removeChild(e)})},p=function(){if(null!==k.CUSTOMER_SERVICE_CONFIG&&void 0!==k.CUSTOMER_SERVICE_CONFIG&&k.CUSTOMER_SERVICE_CONFIG.customHtml&&(d(),document.getElementById("other-service-wrapper"))){var e=document.createElement("div");e.className="custom-chat-container",document.body.appendChild(e);try{var a=k.CUSTOMER_SERVICE_CONFIG.customHtml,t=document.createElement("script"),r=document.createElement("div");r.innerHTML=a;var n=r.querySelector("script");n?(Array.from(n.attributes).forEach(function(e){t.setAttribute(e.name,e.value)}),t.textContent=n.textContent||"",document.body.appendChild(t)):(t.textContent=a,document.body.appendChild(t)),l.value=!1}catch(e){l.value=!1}}},b=(0,r.EW)(function(){return"dark"===localStorage.getItem("theme")});(0,r.wB)(function(){return b.value},function(e){"crisp"===v.value&&i.value&&R.YH.setColorTheme(e?"dark":"light")});var y=function(){var e=(0,h.A)((0,m.A)().m(function e(){var t,r,l,u,i,s;return(0,m.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a.getters.isLoggedIn&&"crisp"===v.value){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,Promise.all([(0,S.ug)(),(0,S.l8)(),(0,S._8)()]);case 2:t=e.v,r=(0,f.A)(t,3),l=r[0],u=r[1],i=r[2],n.value=l.data?l.data:l,(s=u.data?u.data:u)&&s.currency_symbol&&(o.value=s.currency_symbol),c.value=i.data?i.data:i,e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}();return(0,r.sV)((0,h.A)((0,m.A)().m(function e(){return(0,m.A)().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,y();case 1:if("other"!==v.value){e.n=3;break}if(sessionStorage.getItem("cs_page_reloaded")){e.n=2;break}return sessionStorage.setItem("cs_page_reloaded","true"),window.location.reload(),e.a(2);case 2:e.n=4;break;case 3:sessionStorage.removeItem("cs_page_reloaded");case 4:"crisp"===v.value?s():p(),window.addEventListener("storage",function(e){if("theme"===e.key&&"crisp"===v.value&&i.value){var a=e.newValue;R.YH.setColorTheme("dark"===a?"dark":"light")}});case 5:return e.a(2)}},e)}))),(0,r.hi)(function(){if(window.removeEventListener("storage",function(){}),sessionStorage.removeItem("cs_page_reloaded"),"crisp"===v.value&&i.value)try{R.YH.chat.hide()}catch(e){}else d()}),{isDarkTheme:b,otherServiceContainer:u,refreshChat:function(){"crisp"===v.value?(l.value=!0,R.YH.session.reset(),window.CRISP_INITIALIZED=!1,i.value=!1,(0,r.dY)(function(){s()})):window.location.reload()},goBack:function(){if("crisp"===v.value&&i.value)try{R.YH.chat.hide()}catch(e){}else d();e.back()},serviceType:v,loading:l,t}}};const T=(0,t(66262).A)(y,[["render",function(e,a,t,m,f,h){var I=(0,r.g2)("IconArrowLeft"),_=(0,r.g2)("IconRefresh");return(0,r.uX)(),(0,r.CE)("div",{class:(0,n.C4)(["customer-service-container",{"dark-theme":m.isDarkTheme}])},[(0,r.Lk)("div",l,[(0,r.Lk)("button",{class:"back-button",onClick:a[0]||(a[0]=function(){return m.goBack&&m.goBack.apply(m,arguments)})},[(0,r.bF)(I,{size:24})]),(0,r.Lk)("h1",u,(0,n.v_)(m.t("service.title")),1),(0,r.Lk)("button",{class:"refresh-button",onClick:a[1]||(a[1]=function(){return m.refreshChat&&m.refreshChat.apply(m,arguments)})},[(0,r.bF)(_,{size:20})])]),(0,r.Lk)("div",i,["crisp"===m.serviceType?((0,r.uX)(),(0,r.CE)("div",o,[m.loading?((0,r.uX)(),(0,r.CE)("div",c,[a[2]||(a[2]=(0,r.Lk)("div",{class:"loading-spinner"},null,-1)),(0,r.Lk)("p",null,(0,n.v_)(m.t("service.loading")),1)])):(0,r.Q3)("",!0)])):"other"===m.serviceType?((0,r.uX)(),(0,r.CE)("div",v,[(0,r.Lk)("div",s,(0,n.v_)(m.t("service.waitForIcon")),1),(0,r.Lk)("div",d,null,512)])):((0,r.uX)(),(0,r.CE)("div",p,[a[3]||(a[3]=(0,r.Lk)("div",{class:"loading-spinner"},null,-1)),(0,r.Lk)("p",null,(0,n.v_)(m.t("service.loading")),1)]))])],2)}],["__scopeId","data-v-6ead9dd4"]])}}]);
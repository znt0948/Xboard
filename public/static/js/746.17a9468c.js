"use strict";(self.webpackChunkez_theme=self.webpackChunkez_theme||[]).push([[746],{19746:(e,a,l)=>{l.r(a),l.d(a,{default:()=>oe});var s=l(59258),n=l(20908),t=l(30388),r=(l(44114),l(9868),l(78459),l(27495),l(25440),l(20641)),u=l(90033),c=l(53751),i=l(50953),o=l(46992),d=l(33366),v=l(25226),p=l(92549),k=l(19043);function m(){return(0,k.A)({url:"/user/comm/config",method:"get"})}function f(e){return(0,k.A)({url:"/user/order/save",method:"post",data:{period:"deposit",deposit_amount:e,plan_id:0}})}var b=l(80394),L=l(75220),h={class:"deposit-container"},w={class:"deposit-inner"},y={class:"dashboard-card welcome-card"},_={class:"card-header"},g={class:"card-title"},A={class:"card-body"},C={class:"dashboard-card balance-card"},E={class:"card-header"},X={class:"card-title"},R={class:"card-body"},F={key:0,class:"balance-display"},$={class:"balance-value"},K={class:"balance-label"},I={key:1,class:"balance-skeleton"},W={class:"balance-setting"},N={class:"setting-item"},T={class:"setting-info"},z={class:"setting-label"},G={class:"setting-description"},V={class:"setting-toggle"},q=["disabled"],D={class:"dashboard-card deposit-card"},O={class:"card-header"},x={class:"card-title"},M={class:"card-body"},S={class:"deposit-notice"},U={class:"amount-selection"},B={class:"period-cards"},H=["onClick"],J={class:"period-card-inner"},P={class:"period-price"},Q={class:"currency"},j={class:"amount"},Y={class:"custom-amount"},Z={for:"customAmount"},ee={key:0,class:"input-container skeleton-input"},ae={key:1,class:"input-container"},le={class:"currency-symbol"},se=["placeholder"],ne={key:2,class:"error-message"},te={class:"deposit-actions"},re={key:0,class:"btn-order-skeleton"},ue=["disabled"],ce={key:1,class:"loader"};const ie={__name:"WalletDeposit",setup:function(e){var a=(0,o.s9)().t,l=(0,d.d)().showToast,k=(0,L.rd)();(0,b.isXiaoV2board)()||k.push("/dashboard");var ie=(0,i.KR)(0),oe=(0,i.KR)("$"),de=(0,i.KR)(b.WALLET_CONFIG.presetAmounts||[6,30,68,128,256,328,648,1280]),ve=(0,i.KR)(b.WALLET_CONFIG.defaultSelectedAmount||null),pe=(0,i.KR)(""),ke=(0,i.KR)(""),me=b.WALLET_CONFIG.minimumDepositAmount||1,fe=(0,i.KR)(!1),be=(0,i.KR)(!1),Le=(0,i.Kh)({balance:!0,submitting:!1,config:!0}),he=function(){var e=(0,t.A)((0,n.A)().m(function e(){var a;return(0,n.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,m();case 1:(a=e.v)&&a.data&&a.data.currency_symbol&&(oe.value=a.data.currency_symbol),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.p=3,Le.config=!1,e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),we=function(){if(ve.value=null,""!==pe.value){var e=parseFloat(pe.value);isNaN(e)||e<=0?ke.value=a("wallet.deposit.amountError.invalid"):ke.value=e<me?a("wallet.deposit.amountError.minimum").replace("1",me):""}else ke.value=""},ye=(0,r.EW)(function(){return ve.value?ve.value:pe.value&&parseFloat(pe.value)>=1?parseFloat(pe.value):null}),_e=(0,r.EW)(function(){return null!==ye.value}),ge=function(){var e=(0,t.A)((0,n.A)().m(function e(){var s,t,r;return(0,n.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return Le.balance=!0,e.p=1,e.n=2,(0,p.ug)();case 2:(s=e.v)&&s.data&&(ie.value=s.data.balance||0,fe.value=!!s.data.auto_renewal),e.n=4;break;case 3:e.p=3,r=e.v,l((null===(t=r.response)||void 0===t?void 0:t.message)||r.message||a("errors.serverError")||a("common.error_occurred"),"error");case 4:return e.p=4,Le.balance=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=(0,t.A)((0,n.A)().m(function e(){var s,t,r,u;return(0,n.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:return be.value=!0,e.p=1,s={auto_renewal:fe.value?1:0},e.n=2,(0,p.WI)(s);case 2:(t=e.v)&&t.data&&l(a("profile.updateSuccess"),"success"),e.n=4;break;case 3:e.p=3,u=e.v,fe.value=!fe.value,l((null===(r=u.response)||void 0===r?void 0:r.message)||u.message||a("profile.updateError"),"error");case 4:return e.p=4,be.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=(0,t.A)((0,n.A)().m(function e(){var s,t,r,u,c;return(0,n.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(_e.value){e.n=1;break}return l(a("validation.required").replace("{field}",a("wallet.deposit.title"))||a("wallet.deposit.amountError.required"),"warning"),e.a(2);case 1:return e.p=1,Le.submitting=!0,s=Math.round(100*ye.value),e.n=2,f(s);case 2:(t=e.v)&&t.data&&(r=t.data,l(a("wallet.deposit.success"),"success"),k.push({path:"/payment",query:{trade_no:r,type:"deposit"}})),e.n=4;break;case 3:e.p=3,c=e.v,l((null===(u=c.response)||void 0===u?void 0:u.message)||c.message||a("errors.serverError")||a("wallet.deposit.failed"),"error");case 4:return e.p=4,Le.submitting=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}();return(0,r.sV)(function(){ge(),he()}),function(e,a){return(0,r.uX)(),(0,r.CE)("div",h,[(0,r.Lk)("div",w,[(0,r.Lk)("div",y,[(0,r.Lk)("div",_,[(0,r.Lk)("h2",g,(0,u.v_)(e.$t("wallet.welcome.title")||"\u8d26\u6237\u5145\u503c"),1)]),(0,r.Lk)("div",A,[(0,r.Lk)("p",null,(0,u.v_)(e.$t("wallet.welcome.description")||"\u5728\u8fd9\u91cc\u60a8\u53ef\u4ee5\u8f7b\u677e\u5730\u4e3a\u60a8\u7684\u8d26\u6237\u5145\u503c\uff0c\u9009\u62e9\u9884\u8bbe\u91d1\u989d\u6216\u8f93\u5165\u81ea\u5b9a\u4e49\u91d1\u989d\u8fdb\u884c\u5145\u503c\u3002\u5145\u503c\u540e\u7684\u4f59\u989d\u5c06\u7acb\u5373\u5230\u8d26\u5e76\u53ef\u7528\u4e8e\u8d2d\u4e70\u6211\u4eec\u7684\u670d\u52a1\u3002"),1)])]),(0,r.Lk)("div",C,[(0,r.Lk)("div",E,[(0,r.Lk)("h2",X,(0,u.v_)(e.$t("wallet.balance.title")),1)]),(0,r.Lk)("div",R,[Le.balance?((0,r.uX)(),(0,r.CE)("div",I,(0,s.A)(a[2]||(a[2]=[(0,r.Lk)("div",{class:"skeleton-balance-value"},null,-1),(0,r.Lk)("div",{class:"skeleton-balance-label"},null,-1)])))):((0,r.uX)(),(0,r.CE)("div",F,[(0,r.Lk)("div",$,(0,u.v_)(oe.value)+(0,u.v_)((l=ie.value,(parseFloat(l)/100).toFixed(2))),1),(0,r.Lk)("div",K,(0,u.v_)(e.$t("wallet.balance.description")),1)])),(0,r.Lk)("div",W,[(0,r.Lk)("div",N,[(0,r.Lk)("div",T,[(0,r.Lk)("span",z,(0,u.v_)(e.$t("profile.autoRenewal")),1),(0,r.Lk)("span",G,(0,u.v_)(e.$t("profile.autoRenewalDesc")),1)]),(0,r.Lk)("div",V,[(0,r.Lk)("label",{class:(0,u.C4)(["switch",{disabled:be.value}])},[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=function(e){return fe.value=e}),onChange:Ae,disabled:be.value},null,40,q),[[c.lH,fe.value]]),(0,r.Lk)("span",{class:(0,u.C4)(["slider round",{loading:be.value}])},null,2)],2)])])])])]),(0,r.Lk)("div",D,[(0,r.Lk)("div",O,[(0,r.Lk)("h2",x,(0,u.v_)(e.$t("wallet.deposit.title")),1)]),(0,r.Lk)("div",M,[(0,r.Lk)("div",S,[(0,r.bF)((0,i.R1)(v.GBC),{size:20,class:"notice-icon"}),(0,r.Lk)("span",null,(0,u.v_)(e.$t("wallet.deposit.notice")),1)]),(0,r.Lk)("div",U,[(0,r.Lk)("div",B,[Le.config?((0,r.uX)(),(0,r.CE)(r.FK,{key:0},(0,r.pI)(4,function(e){return(0,r.Lk)("div",{key:"skeleton-".concat(e),class:"period-card skeleton-card"},(0,s.A)(a[3]||(a[3]=[(0,r.Lk)("div",{class:"period-card-inner"},[(0,r.Lk)("div",{class:"skeleton-price"})],-1)])))}),64)):((0,r.uX)(!0),(0,r.CE)(r.FK,{key:1},(0,r.pI)(de.value,function(e,a){return(0,r.uX)(),(0,r.CE)("div",{key:a,class:(0,u.C4)(["period-card",{active:ve.value===e}]),onClick:function(a){return function(e){ve.value=e,pe.value="",ke.value=""}(e)}},[(0,r.Lk)("div",J,[(0,r.Lk)("div",P,[(0,r.Lk)("span",Q,(0,u.v_)(oe.value),1),(0,r.Lk)("span",j,(0,u.v_)(e),1)])])],10,H)}),128))])]),(0,r.Lk)("div",Y,[(0,r.Lk)("label",Z,(0,u.v_)(e.$t("wallet.deposit.customAmount")),1),Le.config?((0,r.uX)(),(0,r.CE)("div",ee,(0,s.A)(a[4]||(a[4]=[(0,r.Lk)("div",{class:"skeleton-input-field"},null,-1)])))):((0,r.uX)(),(0,r.CE)("div",ae,[(0,r.Lk)("span",le,(0,u.v_)(oe.value),1),(0,r.bo)((0,r.Lk)("input",{id:"customAmount","onUpdate:modelValue":a[1]||(a[1]=function(e){return pe.value=e}),type:"number",min:"1",placeholder:e.$t("wallet.deposit.customAmountPlaceholder"),onInput:we},null,40,se),[[c.Jo,pe.value]])])),ke.value?((0,r.uX)(),(0,r.CE)("small",ne,(0,u.v_)(ke.value),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",te,[Le.config?((0,r.uX)(),(0,r.CE)("div",re)):((0,r.uX)(),(0,r.CE)("button",{key:1,class:"btn-order",disabled:Le.submitting||!_e.value||parseFloat(pe.value)<(0,i.R1)(me),onClick:Ce},[Le.submitting?((0,r.uX)(),(0,r.CE)("span",ce)):((0,r.uX)(),(0,r.Wv)((0,i.R1)(v.AMT),{key:0,size:18})),(0,r.Lk)("span",null,(0,u.v_)(e.$t("wallet.deposit.button")),1)],8,ue))])])])])]);var l}}};const oe=(0,l(66262).A)(ie,[["__scopeId","data-v-117f5357"]])}}]);
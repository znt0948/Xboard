"use strict";(self.webpackChunkez_theme=self.webpackChunkez_theme||[]).push([[655],{11935:(e,o,a)=>{a.d(o,{f:()=>h,n:()=>f});var r=a(20908),n=a(30388),s=(a(74423),a(44114),a(26099),a(27495),a(21699),a(47764),a(5746),a(62953),a(76031),a(48408),a(14603),a(47566),a(98721),a(75220)),t=a(33366),i=a(46992),c=a(5947),l=a.n(c),u=a(2636),d=a(29501),p={verifyToken:null,redirectPath:null,originalUrl:""};!function(){try{p.originalUrl=window.location.href;var e=window.location.hash||"";if(e.includes("?")){var o=e.split("?")[1];if(o){var a=new URLSearchParams(o);p.verifyToken=a.get("verify"),p.redirectPath=a.get("redirect")}}if(!p.verifyToken){var r=new URLSearchParams(window.location.search);p.verifyToken=r.get("verify"),p.redirectPath=r.get("redirect")}}catch(e){}}();var h=function(){var e=(0,n.A)((0,r.A)().m(function e(){var o,a,n,c,h,f,v,g,m,w,k,L,b,y,P,A=arguments;return(0,r.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=A.length>0&&void 0!==A[0]?A[0]:{},a=(0,s.rd)(),n=(0,t.d)(),c=n.showToast,h=(0,i.s9)(),f=h.t,v=p.verifyToken,g=p.redirectPath,v||(m=window.location.hash,w=new URLSearchParams,m.includes("?")&&(w=new URLSearchParams(m.split("?")[1]||"")),k=m.split("/"),(L=k[k.length-1])&&L.includes("?")&&(w=new URLSearchParams(L.split("?")[1]||"")),v=w.get("verify"),g=w.get("redirect"),v||(b=new URLSearchParams(window.location.search),v=b.get("verify"),g=b.get("redirect"))),g=g||"/dashboard",v){e.n=1;break}return e.a(2,{success:!1,verified:!1});case 1:return l().start(),e.p=2,e.n=3,(0,u.tokenLogin)(v,g);case 3:if(!(y=e.v).data||!y.data.token&&!y.data.auth_data){e.n=4;break}return c(y.message||f("auth.verifyTokenSuccess"),"success"),(0,u.handleLoginSuccess)(y.data,!1).success,P=(0,d.iU)(g),o.onLoginSuccess&&"function"==typeof o.onLoginSuccess&&o.onLoginSuccess(),setTimeout(function(){a.push(P)},500),e.a(2,{success:!0,verified:!0,redirectPath:P});case 4:return c(f("auth.verifyTokenFailed"),"error"),e.a(2,{success:!1,verified:!0,error:f("auth.verifyTokenFailed")});case 5:e.n=7;break;case 6:return e.p=6,e.v,c(f("auth.verifyTokenFailed"),"error"),e.a(2,{success:!1,verified:!0,error:f("auth.verifyTokenFailed")});case 7:return e.p=7,l().done(),e.f(7);case 8:return e.a(2)}},e,null,[[2,6,7,8]])}));return function(){return e.apply(this,arguments)}}(),f=function(){if(p.verifyToken)return!0;var e=window.location.hash,o=new URLSearchParams;e.includes("?")&&(o=new URLSearchParams(e.split("?")[1]||""));var a=e.split("/"),r=a[a.length-1];r&&r.includes("?")&&(o=new URLSearchParams(r.split("?")[1]||""));var n=new URLSearchParams(window.location.search);return o.has("verify")||n.has("verify")||!!p.verifyToken}},53483:(e,o,a)=>{a.r(o),a.d(o,{default:()=>ae});var r=a(20641),n=a(90033),s=a(53751),t={class:"auth-container"},i={class:"top-toolbar"},c={class:"auth-card"},l={class:"auth-header"},u={class:"auth-logo"},d=["src"],p={class:"auth-title"},h={class:"auth-subtitle"},f={class:"form-group"},v={for:"email"},g={class:"input-with-icon"},m=["placeholder"],w={key:0,class:"error-message"},k={class:"form-group"},L={for:"password"},b={class:"input-with-icon"},y=["type","placeholder"],P={key:0,class:"error-message"},A={class:"form-options"},T={class:"remember-me"},S={class:"checkbox-container"},_={class:"checkbox-label"},C=["disabled"],U={key:0,class:"loading-wrapper"},R={key:1},F={class:"auth-footer"},I={class:"auth-divider"},E={class:"auth-divider-text"};var $=a(20908),D=a(30388),W=(a(44114),a(26099),a(27495),a(47764),a(25440),a(5746),a(62953),a(76031),a(48408),a(14603),a(47566),a(98721),a(50953)),H=a(75220),K=a(46992),O=a(33366),X=a(89947),q=a(27720),M=a(46553),x=a(94634),G=a(36886),N=a(79473),V=a(63259),z=a(2636),Q=a(92614),J=a(93824),j=a(11935),B=a(80394),Y=a(88774),Z=a(52072),ee=a(84320);const oe={name:"LoginView",components:{ThemeToggle:X.A,LanguageSelector:q.A,IconMail:M.A,IconLock:x.A,IconArrowRight:G.A,IconEye:N.A,IconEyeOff:V.A,DomainAuthAlert:J.A,AuthPopup:Y.A},setup:function(){var e,o,a,n,s=(0,H.rd)(),t=(0,K.s9)().t,i=(0,O.d)().showToast,c=(0,ee.b)().goTo,l=(0,W.KR)("./images/logo.png"),u=(0,W.Kh)({email:"",password:"",rememberMe:!1}),d=(0,W.Kh)({email:"",password:""}),p=(0,W.KR)(!1),h=(0,W.KR)(!1),f=(0,W.KR)(!1),v=(0,W.Kh)({title:(null===(e=B.AUTH_CONFIG.popup)||void 0===e?void 0:e.title)||"",content:(null===(o=B.AUTH_CONFIG.popup)||void 0===o?void 0:o.content)||"",cooldownHours:(null===(a=B.AUTH_CONFIG.popup)||void 0===a?void 0:a.cooldownHours)||24,closeWaitSeconds:(null===(n=B.AUTH_CONFIG.popup)||void 0===n?void 0:n.closeWaitSeconds)||0});(0,r.sV)((0,D.A)((0,$.A)().m(function e(){var o,a;return(0,$.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!(0,j.n)()){e.n=6;break}return p.value=!0,e.p=1,e.n=2,(0,j.f)({onLoginSuccess:function(){}});case 2:if(!e.v.success){e.n=3;break}return e.a(2);case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,p.value=!1,e.f(5);case 6:if(o=new URLSearchParams(window.location.search),!("true"===o.get("logout"))){e.n=7;break}return i(t("auth.logoutSuccess"),"success",3e3),window.history&&window.history.replaceState&&(a=window.location.href.replace("?logout=true","").replace("&logout=true",""),window.history.replaceState({},document.title,a)),e.a(2);case 7:if(f.value=(0,Z.z)(B.AUTH_CONFIG.popup),e.p=8,!0!==window._isLoggingOut){e.n=9;break}return e.a(2);case 9:(0,z.checkLoginStatus)()&&(i(t("auth.alreadyLoggedIn"),"info"),setTimeout(function(){s.push("/dashboard")},500)),e.n=11;break;case 10:e.p=10,e.v;case 11:return e.a(2)}},e,null,[[8,10],[1,4,5,6]])})));var g=function(){var e=!0;return d.email="",d.password="",(0,Q.Kf)(u.email)?(0,Q.DT)(u.email)||(d.email=t("validation.emailInvalid"),e=!1):(d.email=t("validation.emailRequired"),e=!1),(0,Q.Kf)(u.password)||(d.password=t("validation.passwordRequired"),e=!1),e},m=function(){var e=(0,D.A)((0,$.A)().m(function e(){var o,a,r;return(0,$.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(g()){e.n=1;break}return e.a(2);case 1:return p.value=!0,e.p=2,e.n=3,(0,z.login)(u);case 3:o=e.v,i(o.message||t("auth.loginSuccess"),"success",3e3),setTimeout(function(){s.push("/dashboard")},300),e.n=5;break;case 4:e.p=4,r=e.v,i((null===(a=r.response)||void 0===a?void 0:a.message)||r.message||t("auth.loginFailed"),"error");case 5:return e.p=5,p.value=!1,e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}();return{formData:u,errors:d,loading:p,showPassword:h,handleLogin:m,logoPath:l,handleLogoError:function(){l.value="/images/logo.png"},showAuthPopup:f,authPopupConfig:v,handleAuthPopupClose:function(){f.value=!1},goTo:c}}};const ae=(0,a(66262).A)(oe,[["render",function(e,o,a,$,D,W){var H=(0,r.g2)("ThemeToggle"),K=(0,r.g2)("LanguageSelector"),O=(0,r.g2)("IconMail"),X=(0,r.g2)("IconLock"),q=(0,r.g2)("IconEye"),M=(0,r.g2)("IconEyeOff"),x=(0,r.g2)("router-link"),G=(0,r.g2)("IconArrowRight"),N=(0,r.g2)("AuthPopup");return(0,r.uX)(),(0,r.CE)("div",t,[o[10]||(o[10]=(0,r.Lk)("div",{class:"background-decoration"},[(0,r.Lk)("div",{class:"floating-ball ball-1"}),(0,r.Lk)("div",{class:"floating-ball ball-2"}),(0,r.Lk)("div",{class:"floating-ball ball-3"})],-1)),(0,r.Lk)("div",i,[(0,r.bF)(H),(0,r.bF)(K)]),(0,r.Lk)("div",c,[(0,r.Lk)("div",l,[(0,r.Lk)("div",u,[(0,r.Lk)("img",{src:$.logoPath,alt:"Logo",onError:o[0]||(o[0]=function(){return $.handleLogoError&&$.handleLogoError.apply($,arguments)}),onClick:o[1]||(o[1]=function(e){return $.goTo("/")})},null,40,d)]),(0,r.Lk)("h1",p,(0,n.v_)(e.$t("auth.loginTitle")),1),(0,r.Lk)("p",h,(0,n.v_)(e.$t("auth.loginSubtitle")),1)]),(0,r.Lk)("form",{class:"auth-form",onSubmit:o[6]||(o[6]=(0,s.D$)(function(){return $.handleLogin&&$.handleLogin.apply($,arguments)},["prevent"]))},[(0,r.Lk)("div",f,[(0,r.Lk)("label",v,[(0,r.eW)((0,n.v_)(e.$t("common.email"))+" ",1),o[7]||(o[7]=(0,r.Lk)("span",{class:"required"},"*",-1))]),(0,r.Lk)("div",g,[(0,r.bF)(O,{class:"input-icon"}),(0,r.bo)((0,r.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":o[2]||(o[2]=function(e){return $.formData.email=e}),class:"form-control",placeholder:e.$t("auth.emailPlaceholder"),required:""},null,8,m),[[s.Jo,$.formData.email]])]),$.errors.email?((0,r.uX)(),(0,r.CE)("div",w,(0,n.v_)($.errors.email),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",k,[(0,r.Lk)("label",L,[(0,r.eW)((0,n.v_)(e.$t("common.password"))+" ",1),o[8]||(o[8]=(0,r.Lk)("span",{class:"required"},"*",-1))]),(0,r.Lk)("div",b,[(0,r.bF)(X,{class:"input-icon"}),(0,r.bo)((0,r.Lk)("input",{type:$.showPassword?"text":"password",id:"password","onUpdate:modelValue":o[3]||(o[3]=function(e){return $.formData.password=e}),class:"form-control",placeholder:e.$t("auth.passwordPlaceholder"),required:""},null,8,y),[[s.hp,$.formData.password]]),(0,r.Lk)("div",{class:"password-toggle",onClick:o[4]||(o[4]=function(e){return $.showPassword=!$.showPassword})},[$.showPassword?((0,r.uX)(),(0,r.Wv)(M,{key:1})):((0,r.uX)(),(0,r.Wv)(q,{key:0}))])]),$.errors.password?((0,r.uX)(),(0,r.CE)("div",P,(0,n.v_)($.errors.password),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",A,[(0,r.Lk)("div",T,[(0,r.Lk)("label",S,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":o[5]||(o[5]=function(e){return $.formData.rememberMe=e})},null,512),[[s.lH,$.formData.rememberMe]]),o[9]||(o[9]=(0,r.Lk)("span",{class:"checkmark"},null,-1)),(0,r.Lk)("span",_,(0,n.v_)(e.$t("common.rememberMe")),1)])]),(0,r.bF)(x,{to:"/forgot-password",class:"forgot-password"},{default:(0,r.k6)(function(){return[(0,r.eW)((0,n.v_)(e.$t("common.forgotPassword")),1)]}),_:1})]),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary btn-block",disabled:$.loading},[$.loading?((0,r.uX)(),(0,r.CE)("span",U,[(0,r.Lk)("span",null,(0,n.v_)(e.$t("common.loading")),1)])):((0,r.uX)(),(0,r.CE)("span",R,[(0,r.eW)((0,n.v_)(e.$t("common.login"))+" ",1),(0,r.bF)(G,{class:"icon-right"})]))],8,C)],32),(0,r.Lk)("div",F,[(0,r.Lk)("div",I,[(0,r.Lk)("span",E,(0,n.v_)(e.$t("auth.noAccount")),1)]),(0,r.bF)(x,{to:"/register",class:"btn btn-secondary btn-block"},{default:(0,r.k6)(function(){return[(0,r.eW)((0,n.v_)(e.$t("auth.createAccount")),1)]}),_:1})])]),(0,r.bF)(N,{"show-popup":$.showAuthPopup,title:$.authPopupConfig.title,content:$.authPopupConfig.content,"cooldown-hours":$.authPopupConfig.cooldownHours,"close-wait-seconds":$.authPopupConfig.closeWaitSeconds,onClose:$.handleAuthPopupClose},null,8,["show-popup","title","content","cooldown-hours","close-wait-seconds","onClose"])])}],["__scopeId","data-v-7602f90b"]])}}]);
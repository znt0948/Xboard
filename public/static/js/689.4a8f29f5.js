"use strict";(self.webpackChunkez_theme=self.webpackChunkez_theme||[]).push([[689],{11935:(e,o,a)=>{a.d(o,{f:()=>h,n:()=>v});var n=a(20908),r=a(30388),t=(a(74423),a(44114),a(26099),a(27495),a(21699),a(47764),a(5746),a(62953),a(76031),a(48408),a(14603),a(47566),a(98721),a(75220)),s=a(33366),i=a(46992),l=a(5947),c=a.n(l),u=a(2636),d=a(29501),p={verifyToken:null,redirectPath:null,originalUrl:""};!function(){try{p.originalUrl=window.location.href;var e=window.location.hash||"";if(e.includes("?")){var o=e.split("?")[1];if(o){var a=new URLSearchParams(o);p.verifyToken=a.get("verify"),p.redirectPath=a.get("redirect")}}if(!p.verifyToken){var n=new URLSearchParams(window.location.search);p.verifyToken=n.get("verify"),p.redirectPath=n.get("redirect")}}catch(e){}}();var h=function(){var e=(0,r.A)((0,n.A)().m(function e(){var o,a,r,l,h,v,g,f,m,w,k,L,C,A,T,b=arguments;return(0,n.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=b.length>0&&void 0!==b[0]?b[0]:{},a=(0,t.rd)(),r=(0,s.d)(),l=r.showToast,h=(0,i.s9)(),v=h.t,g=p.verifyToken,f=p.redirectPath,g||(m=window.location.hash,w=new URLSearchParams,m.includes("?")&&(w=new URLSearchParams(m.split("?")[1]||"")),k=m.split("/"),(L=k[k.length-1])&&L.includes("?")&&(w=new URLSearchParams(L.split("?")[1]||"")),g=w.get("verify"),f=w.get("redirect"),g||(C=new URLSearchParams(window.location.search),g=C.get("verify"),f=C.get("redirect"))),f=f||"/dashboard",g){e.n=1;break}return e.a(2,{success:!1,verified:!1});case 1:return c().start(),e.p=2,e.n=3,(0,u.tokenLogin)(g,f);case 3:if(!(A=e.v).data||!A.data.token&&!A.data.auth_data){e.n=4;break}return l(A.message||v("auth.verifyTokenSuccess"),"success"),(0,u.handleLoginSuccess)(A.data,!1).success,T=(0,d.iU)(f),o.onLoginSuccess&&"function"==typeof o.onLoginSuccess&&o.onLoginSuccess(),setTimeout(function(){a.push(T)},500),e.a(2,{success:!0,verified:!0,redirectPath:T});case 4:return l(v("auth.verifyTokenFailed"),"error"),e.a(2,{success:!1,verified:!0,error:v("auth.verifyTokenFailed")});case 5:e.n=7;break;case 6:return e.p=6,e.v,l(v("auth.verifyTokenFailed"),"error"),e.a(2,{success:!1,verified:!0,error:v("auth.verifyTokenFailed")});case 7:return e.p=7,c().done(),e.f(7);case 8:return e.a(2)}},e,null,[[2,6,7,8]])}));return function(){return e.apply(this,arguments)}}(),v=function(){if(p.verifyToken)return!0;var e=window.location.hash,o=new URLSearchParams;e.includes("?")&&(o=new URLSearchParams(e.split("?")[1]||""));var a=e.split("/"),n=a[a.length-1];n&&n.includes("?")&&(o=new URLSearchParams(n.split("?")[1]||""));var r=new URLSearchParams(window.location.search);return o.has("verify")||r.has("verify")||!!p.verifyToken}},71713:(e,o,a)=>{a.r(o),a.d(o,{default:()=>se});var n=a(20641),r=a(90033),t=a(53751),s={class:"login-view-container"},i={class:"auth-split-container"},l={class:"auth-split-right"},c={class:"top-toolbar"},u={key:0,class:"auth-form-container"},d={class:"loading-container"},p={key:1,class:"auth-form-container"},h={class:"auth-header"},v={class:"auth-logo"},g=["src"],f={class:"auth-title"},m={class:"auth-subtitle"},w={class:"form-group"},k={for:"email"},L={class:"input-with-icon"},C=["placeholder"],A={key:0,class:"error-message"},T={class:"form-group"},b={for:"password"},_={class:"input-with-icon"},y=["type","placeholder"],U={key:0,class:"error-message"},O={class:"form-options"},I={class:"remember-me"},S={class:"checkbox-container"},P={class:"checkbox-label"},F=["disabled"],N={key:0,class:"loading-wrapper"},G={key:1},E={class:"auth-footer"},H={class:"auth-divider"},R={class:"auth-divider-text"};var W=a(20908),Y=a(30388),$=(a(44114),a(23288),a(26099),a(27495),a(47764),a(25440),a(5746),a(62953),a(76031),a(48408),a(14603),a(47566),a(98721),a(50953)),M=a(75220),K=a(46992),X=a(33366),D=a(89947),q=a(27720),x=a(46553),Q=a(94634),V=a(36886),z=a(79473),B=a(63259),J=a(2636),j=a(92614),Z=a(93824),ee=a(11935),oe=a(80394),ae=a(88774),ne=a(52072),re=a(84320);const te={name:"LoginView",components:{ThemeToggle:D.A,LanguageSelector:q.A,IconMail:x.A,IconLock:Q.A,IconArrowRight:V.A,IconEye:z.A,IconEyeOff:B.A,DomainAuthAlert:Z.A,AuthPopup:ae.A},setup:function(){var e,o,a,r,t=(0,M.rd)(),s=(0,K.s9)().t,i=(0,X.d)().showToast,l=(0,re.b)().goTo,c=(0,$.KR)("./images/logo.png"),u=(0,$.Kh)({email:"",password:"",rememberMe:!1}),d=(0,$.Kh)({email:"",password:""}),p=(0,$.KR)(!1),h=(0,$.KR)(!1),v=(0,$.KR)(!1),g=(0,$.KR)(!1),f=(0,$.KR)(!1),m=(0,$.Kh)({title:(null===(e=oe.AUTH_CONFIG.popup)||void 0===e?void 0:e.title)||"",content:(null===(o=oe.AUTH_CONFIG.popup)||void 0===o?void 0:o.content)||"",cooldownHours:(null===(a=oe.AUTH_CONFIG.popup)||void 0===a?void 0:a.cooldownHours)||24,closeWaitSeconds:(null===(r=oe.AUTH_CONFIG.popup)||void 0===r?void 0:r.closeWaitSeconds)||0}),w=(0,$.KR)(!1),k=(0,n.EW)(function(){var e;return!1!==(null===oe.AUTH_LAYOUT_CONFIG||void 0===oe.AUTH_LAYOUT_CONFIG||null===(e=oe.AUTH_LAYOUT_CONFIG.splitLayout)||void 0===e||null===(e=e.leftContent)||void 0===e||null===(e=e.siteName)||void 0===e?void 0:e.show)}),L=(0,n.EW)(function(){var e;return"black"===((null===oe.AUTH_LAYOUT_CONFIG||void 0===oe.AUTH_LAYOUT_CONFIG||null===(e=oe.AUTH_LAYOUT_CONFIG.splitLayout)||void 0===e||null===(e=e.leftContent)||void 0===e||null===(e=e.siteName)||void 0===e?void 0:e.color)||"white").toLowerCase()?"black":"white"}),C=(0,n.EW)(function(){var e,o=(null===oe.AUTH_LAYOUT_CONFIG||void 0===oe.AUTH_LAYOUT_CONFIG||null===(e=oe.AUTH_LAYOUT_CONFIG.splitLayout)||void 0===e||null===(e=e.leftContent)||void 0===e?void 0:e.backgroundImage)||"";return o?{"background-image":"url(".concat(o,")"),"background-position":"center","background-size":"cover","background-repeat":"no-repeat"}:{background:"var(--theme-color)"}}),A=(0,n.EW)(function(){var e;return!1!==(null===oe.AUTH_LAYOUT_CONFIG||void 0===oe.AUTH_LAYOUT_CONFIG||null===(e=oe.AUTH_LAYOUT_CONFIG.splitLayout)||void 0===e||null===(e=e.leftContent)||void 0===e||null===(e=e.greeting)||void 0===e?void 0:e.show)}),T=(0,n.EW)(function(){return U()}),b=(0,n.EW)(function(){var e;return"black"===((null===oe.AUTH_LAYOUT_CONFIG||void 0===oe.AUTH_LAYOUT_CONFIG||null===(e=oe.AUTH_LAYOUT_CONFIG.splitLayout)||void 0===e||null===(e=e.leftContent)||void 0===e||null===(e=e.greeting)||void 0===e?void 0:e.color)||"white").toLowerCase()?"black":"white"});(0,n.sV)((0,Y.A)((0,W.A)().m(function e(){var o,a;return(0,W.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!(0,ee.n)()){e.n=6;break}return p.value=!0,e.p=1,e.n=2,(0,ee.f)({onLoginSuccess:function(){}});case 2:if(!e.v.success){e.n=3;break}return e.a(2);case 3:e.n=5;break;case 4:e.p=4,e.v;case 5:return e.p=5,p.value=!1,e.f(5);case 6:if(o=new URLSearchParams(window.location.search),!("true"===o.get("logout"))){e.n=7;break}return i(s("auth.logoutSuccess"),"success",3e3),window.history&&window.history.replaceState&&(a=window.location.href.replace("?logout=true","").replace("&logout=true",""),window.history.replaceState({},document.title,a)),e.a(2);case 7:if(e.p=7,!0!==window._isLoggingOut){e.n=8;break}return e.a(2);case 8:(0,J.checkLoginStatus)()&&(i(s("auth.alreadyLoggedIn"),"info"),setTimeout(function(){t.push("/dashboard")},500)),f.value=(0,ne.z)(oe.AUTH_CONFIG.popup),e.n=10;break;case 9:e.p=9,e.v;case 10:return e.a(2)}},e,null,[[7,9],[1,4,5,6]])})));var _=function(){var e=!0;return d.email="",d.password="",(0,j.Kf)(u.email)?(0,j.DT)(u.email)||(d.email=s("validation.emailInvalid"),e=!1):(d.email=s("validation.emailRequired"),e=!1),(0,j.Kf)(u.password)||(d.password=s("validation.passwordRequired"),e=!1),e},y=function(){var e=(0,Y.A)((0,W.A)().m(function e(){var o,a,n;return(0,W.A)().w(function(e){for(;;)switch(e.p=e.n){case 0:if(_()){e.n=1;break}return e.a(2);case 1:return p.value=!0,e.p=2,e.n=3,(0,J.login)(u);case 3:o=e.v,i(o.message||s("auth.loginSuccess"),"success",3e3),setTimeout(function(){t.push("/dashboard")},300),e.n=5;break;case 4:e.p=4,n=e.v,i((null===(a=n.response)||void 0===a?void 0:a.message)||n.message||s("auth.loginFailed"),"error");case 5:return e.p=5,p.value=!1,e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(new Date).getHours();return e>=5&&e<12?"Good Morning":e>=12&&e<18?"Good Afternoon":e>=18&&e<22?"Good Evening":"Good Night"};return{formData:u,errors:d,loading:p,showPassword:w,handleLogin:y,logoPath:c,handleLogoError:function(){c.value="/images/logo.png"},leftSideStyles:C,configLoading:h,showCaptchaModal:v,isClosingModal:g,showSiteName:k,siteNameColorClass:L,SITE_CONFIG:oe.SITE_CONFIG,showGreeting:A,greetingMessage:T,greetingColorClass:b,getTimeBasedGreeting:U,showAuthPopup:f,authPopupConfig:m,handleAuthPopupClose:function(){f.value=!1},goTo:l}}};const se=(0,a(66262).A)(te,[["render",function(e,o,a,W,Y,$){var M=(0,n.g2)("ThemeToggle"),K=(0,n.g2)("LanguageSelector"),X=(0,n.g2)("IconMail"),D=(0,n.g2)("IconLock"),q=(0,n.g2)("IconEye"),x=(0,n.g2)("IconEyeOff"),Q=(0,n.g2)("router-link"),V=(0,n.g2)("IconArrowRight"),z=(0,n.g2)("AuthPopup");return(0,n.uX)(),(0,n.CE)("div",s,[(0,n.Lk)("div",i,[(0,n.Lk)("div",{class:"auth-split-left",style:(0,r.Tr)(W.leftSideStyles)},[o[8]||(o[8]=(0,n.Lk)("div",{class:"left-content-overlay"},null,-1)),W.showSiteName?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,r.C4)(["site-name",W.siteNameColorClass]),onClick:o[0]||(o[0]=function(e){return W.goTo("/")})},(0,r.v_)(W.SITE_CONFIG.siteName),3)):(0,n.Q3)("",!0),W.showGreeting?((0,n.uX)(),(0,n.CE)("div",{key:1,class:(0,r.C4)(["greeting-text",W.greetingColorClass])},(0,r.v_)(W.greetingMessage),3)):(0,n.Q3)("",!0)],4),(0,n.Lk)("div",l,[(0,n.Lk)("div",c,[(0,n.bF)(M),(0,n.bF)(K)]),W.configLoading?((0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("div",d,[o[9]||(o[9]=(0,n.Lk)("div",{class:"loading-spinner"},null,-1)),(0,n.Lk)("p",null,(0,r.v_)(e.$t("common.loading")),1)])])):((0,n.uX)(),(0,n.CE)("div",p,[(0,n.Lk)("div",h,[(0,n.Lk)("div",v,[(0,n.Lk)("img",{src:W.logoPath,alt:"Logo",onError:o[1]||(o[1]=function(){return W.handleLogoError&&W.handleLogoError.apply(W,arguments)}),onClick:o[2]||(o[2]=function(e){return W.goTo("/")})},null,40,g)]),(0,n.Lk)("h1",f,(0,r.v_)(e.$t("auth.loginTitle")),1),(0,n.Lk)("p",m,(0,r.v_)(e.$t("auth.loginSubtitle")),1)]),(0,n.Lk)("form",{class:"auth-form",onSubmit:o[7]||(o[7]=(0,t.D$)(function(){return W.handleLogin&&W.handleLogin.apply(W,arguments)},["prevent"]))},[(0,n.Lk)("div",w,[(0,n.Lk)("label",k,[(0,n.eW)((0,r.v_)(e.$t("common.email"))+" ",1),o[10]||(o[10]=(0,n.Lk)("span",{class:"required"},"*",-1))]),(0,n.Lk)("div",L,[(0,n.bF)(X,{class:"input-icon"}),(0,n.bo)((0,n.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":o[3]||(o[3]=function(e){return W.formData.email=e}),class:"form-control",placeholder:e.$t("auth.emailPlaceholder"),required:""},null,8,C),[[t.Jo,W.formData.email]])]),W.errors.email?((0,n.uX)(),(0,n.CE)("div",A,(0,r.v_)(W.errors.email),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",T,[(0,n.Lk)("label",b,[(0,n.eW)((0,r.v_)(e.$t("common.password"))+" ",1),o[11]||(o[11]=(0,n.Lk)("span",{class:"required"},"*",-1))]),(0,n.Lk)("div",_,[(0,n.bF)(D,{class:"input-icon"}),(0,n.bo)((0,n.Lk)("input",{type:W.showPassword?"text":"password",id:"password","onUpdate:modelValue":o[4]||(o[4]=function(e){return W.formData.password=e}),class:"form-control",placeholder:e.$t("auth.passwordPlaceholder"),required:""},null,8,y),[[t.hp,W.formData.password]]),(0,n.Lk)("div",{class:"password-toggle",onClick:o[5]||(o[5]=function(e){return W.showPassword=!W.showPassword})},[W.showPassword?((0,n.uX)(),(0,n.Wv)(x,{key:1})):((0,n.uX)(),(0,n.Wv)(q,{key:0}))])]),W.errors.password?((0,n.uX)(),(0,n.CE)("div",U,(0,r.v_)(W.errors.password),1)):(0,n.Q3)("",!0)]),(0,n.Lk)("div",O,[(0,n.Lk)("div",I,[(0,n.Lk)("label",S,[(0,n.bo)((0,n.Lk)("input",{type:"checkbox","onUpdate:modelValue":o[6]||(o[6]=function(e){return W.formData.rememberMe=e})},null,512),[[t.lH,W.formData.rememberMe]]),o[12]||(o[12]=(0,n.Lk)("span",{class:"checkmark"},null,-1)),(0,n.Lk)("span",P,(0,r.v_)(e.$t("common.rememberMe")),1)])]),(0,n.bF)(Q,{to:"/forgot-password",class:"forgot-password"},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(e.$t("common.forgotPassword")),1)]}),_:1})]),(0,n.Lk)("button",{type:"submit",class:"btn btn-primary btn-block",disabled:W.loading},[W.loading?((0,n.uX)(),(0,n.CE)("span",N,[(0,n.Lk)("span",null,(0,r.v_)(e.$t("common.loading")),1)])):((0,n.uX)(),(0,n.CE)("span",G,[(0,n.eW)((0,r.v_)(e.$t("common.login"))+" ",1),(0,n.bF)(V,{class:"icon-right"})]))],8,F)],32),(0,n.Lk)("div",E,[(0,n.Lk)("div",H,[(0,n.Lk)("span",R,(0,r.v_)(e.$t("auth.noAccount")),1)]),(0,n.bF)(Q,{to:"/register",class:"btn btn-secondary btn-block",replace:""},{default:(0,n.k6)(function(){return[(0,n.eW)((0,r.v_)(e.$t("auth.createAccount")),1)]}),_:1})])]))])]),W.showCaptchaModal?((0,n.uX)(),(0,n.CE)("div",{key:0,class:(0,r.C4)(["captcha-modal",{closing:W.isClosingModal}])},null,2)):(0,n.Q3)("",!0),(0,n.bF)(z,{"show-popup":W.showAuthPopup,title:W.authPopupConfig.title,content:W.authPopupConfig.content,"cooldown-hours":W.authPopupConfig.cooldownHours,"close-wait-seconds":W.authPopupConfig.closeWaitSeconds,onClose:W.handleAuthPopupClose},null,8,["show-popup","title","content","cooldown-hours","close-wait-seconds","onClose"])])}],["__scopeId","data-v-94a66a34"]])}}]);